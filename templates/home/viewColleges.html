
{% extends 'home/base_map.html'%}
{% load static %}
{% block extra_resources%}
    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-BmbxuPwQa2lc/FVzBcNJ7UAyJxM6wuqIj61tLrc4wSX0szH/Ev+nYRRuWlolflfl"crossorigin="anonymous"/>

    <link rel="preconnect" href="https://fonts.gstatic.com" />
    <link href="https://fonts.googleapis.com/css2?family=Roboto+Condensed&display=swap" rel="stylesheet"/>

    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/css/bootstrap.min.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/js/bootstrap.min.js"></script>

<script src="{% static 'static1/plugins/L.Control.Pan.js' %}"></script>

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.1.2/css/all.min.css" integrity="sha512-1sCRPdkRXhBV2PBLUdRb4tMg1w2YPf37qatUFeS7zlBy7jJI8Lf4VHwWfZZfpXtYSLy85pkm9GaYVYMfw5BC1A==" crossorigin="anonymous" referrerpolicy="no-referrer" />

<style>

  datalist {
    display: flex;
    justify-content: space-between;
    color: black;
  }
  
  input {
    width: 50%;
  }

#map_canvas {
    height: 100%;
    width: 100%;
    position: absolute
}
footer{
      position: relative;
      bottom: 0;
      font-size: 18px;
      text-align: center;
      width: 100%;
      height: 13%;
      opacity: 1.0;
      z-index: 1000;
    }

label{
    font-size: 15px;
}
.multiselect {
  width: 200px;
}

.selectBox {
  position: relative;
}

.selectBox select {
  width: 100%;
  font-weight: bold;
}

.overSelect {
  position: absolute;
  left: 0;
  right: 0;
  top: 0;
  bottom: 0;
}

/* #checkboxes {
  display: none;
  border: 1px #dadada solid;
} */
footer{
      position: relative;
      bottom: 0;
      font-size: 18px;
      text-align: center;
      width: 100%;
      height: 13%;
      opacity: 1.0;
      z-index: 1000;
    }
#checkboxes label {
  display: block;
}

#checkboxes label:hover {
  background-color: #1e90ff;
}


#checkboxes1 {
  display: none;
  border: 1px #dadada solid;
}

#checkboxes1 label {
  display: block;
}

#checkboxes1 label:hover {
  background-color: #1e90ff;
}
#ward122 {
  display: none;
  border: 1px #dadada solid;
}

#ward122 label {
  display: block;
}
#wardSdiv {
  display: none;
  border: 1px #dadada solid;

}

#wardSdiv label {
  display: block;
}

#wardGSdiv {
  display: none;
  border: 1px #dadada solid;
}

#wardGSdiv label {
  display: block;
}

#wardLdiv {
  display: none;
  border: 1px #dadada solid;
}

#wardkwestdiv label {
  display: block;
}
#wardkwestdiv {
  display: none;
  border: 1px #dadada solid;
}

#wardLdiv label {
  display: block;
}

    h6 {
        color: blue;
    }
/* For mobile phones: */
[class*="col-"] {
  width: 100%;
}

tr{
  border-bottom: 1px solid #dadada;
  width: auto;
}

@media only screen and (min-width: 600px) {
  /* For tablets: */
  .col-s-1 {width: 8.33%;}
  .col-s-2 {width: 16.66%;}
  .col-s-3 {width: 25%;}
  .col-s-4 {width: 33.33%;}
  .col-s-5 {width: 41.66%;}
  .col-s-6 {width: 50%;}
  .col-s-7 {width: 58.33%;}
  .col-s-8 {width: 66.66%;}
  .col-s-9 {width: 75%;}
  .col-s-10 {width: 83.33%;}
  .col-s-11 {width: 91.66%;}
  .col-s-12 {width: 100%;}
}
@media only screen and (min-width: 768px) {
  /* For desktop: */
  .col-1 {width: 8.33%;}
  .col-2 {width: 16.66%;}
  .col-3 {width: 25%;}
  .col-4 {width: 33.33%;}
  .col-5 {width: 41.66%;}
  .col-6 {width: 50%;}
  .col-7 {width: 58.33%;}
  .col-8 {width: 66.66%;}
  .col-9 {width: 75%;}
  .col-10 {width: 83.33%;}
  .col-11 {width: 91.66%;}
  .col-12 {width: 100%;}
}
</style>
{% endblock %}

{% block map %}


<div id="mapid" style="width: 100%; height: 100%; z-index: 100%;"></div>
<div id="sidebar" style="background-color: rgba(255, 255, 255); height: 80% ;z-index: 100%;">             
  <script>
    var mymap = L.map('mapid').setView([19.7515-1,75.7139-1], 4.5);
  
    L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
      maxZoom: 19,
      attribution: 'Â© OpenStreetMap'
    }).addTo(mymap);
  
    var sidebar = L.control.sidebar('sidebar',{
      position:'left'
    })
    mymap.addControl(sidebar);
    sidebar.show()
  
    easybutton = L.easyButton('fa fa-bars',function(){
      sidebar.toggle()
    }).addTo(mymap)
  </script>




    <div class="border">

      <center><button type="button" class="btn btn-primary mt-2" onclick="alll()" style="background-color: #000009 ;align-content: center;z-index: auto;display: block;" >All Maharashtra Colleges  </button></center>
      <br>
      <div class="form-group col-md-5 multiselect">
        <label for="inputRegion">regionname</label>
        <select class="form-control" id="inputRegion" name="region" z-index="auto">
        <option value="SelectState">Select Region</option>
        <option value="All">All</option>
        
        {% for i in region %}
        <option value="{{i.regionname}}">{{i.regionname}}</option>
        {% endfor %}

        </select>
      </div>
      <div class="form-group col-md-4 multiselect z-index:auto">
    <label for="inputDistrict">District</label>
    <select class="form-control" id="inputDistrict">
                        <option value="choose">Select District</option>
                        <option value="All">All</option>

                        <!--<option value="Raigad">Raigad</option>
                        <option value="Ratnagiri">Ratnagiri</option>
                        <option value="Sindhudurg">Sindhudurg</option>
                        <option value="mumbai_suburb">Mumbai Suburban District</option>
                        <option value="Mumbai City">Mumbai City</option>
                        <option value="Thane"> Thane</option>
                        <option value="Palghar">Palghar</option>
                        <option value="Nashik">Nashik</option>
                        <option value="Jalgaon">Jalgaon</option>
                        <option value="Buldhana">Buldhana</option>
                        <option value="Akola">Akola</option>
                        <option value="Washim">Washim</option>
                        <option value="Amravati">Amravati</option>
                        <option value="Wardha">Wardha</option>
                        <option value="Nagpur">Nagpur</option>
                        <option value="Bhandara">Bhandara</option>
                        <option value="Gondia">Gondia</option>
                        <option value="Gadchiroli">Gadchiroli</option>
                        <option value="Chandrapur">Chandrapur</option>
                        <option value="Yavatmal">Yavatmal</option>
                        <option value="Nanded">Nanded</option>
                        <option value="Hingoli">Hingoli</option>
                        <option value="Parbhani">Parbhani</option>
                        <option value="Jalna">Jalna</option>
                        <option value="Aurangabad">Aurangabad</option>
                        <option value="Beed">Beed</option>
                        <option value="Latur">Latur</option>
                        <option value="Osmanabad">Osmanabad</option>
                        <option value="Solapur North">Solapur North</option>
                        <option value="Ahmednagar">Ahmednagar</option>
                        <option value="Pune">Pune</option>
                        <option value="Satara">Satara</option>
                        <option value="Sangli">Sangli</option>
                        <option value="Kolhapur">Kolhapur</option>-->
                        {% for i in district %}
                        <option value="{{i.districtname}}">{{i.districtname}}</option>
                        {% endfor %}
                      </select>
  </div>




    <div class="form-group col-md-4 multiselect">
      <label for="inputTaluka">Taluka</label>
      <select class="form-control" id="inputTaluka">
          <option value="choose">-- select one -- </option>
          <option value="All">All</option>
          
          {% for i in taluka %}
          <option value="{{i.talukaname}}">{{i.talukaname}}</option>
          {% endfor %}
      </select>
    </div>



    <div class="form-group col-md-5 multiselect">
      <label for="Status">Institute Status Autonomy</label>
      <select class="form-control" id="Status">
                          <option value="SelectState">Select</option>
                          <option value="Autonomous">Autonomous</option>
                          <option value="Non-Autonomous">Non-Autonomous</option>
                        </select>
    </div>



      <div class="form-group col-md-5 multiselect">
        <label for="Minority">Institute Status Minority</label>
        <select class="form-control" id="Minority" >
                            <option value="SelectState">Select</option>
                            
                            {% for i in minority %}
                            <option value="{{i.institutestatusminority}}">{{i.institutestatusminority}}</option>
                            {% endfor %}


                          </select>
      </div>



        <div class="form-group col-md-5 multiselect">
          <label for="InstituteStatus">InstituteStatus</label>
          <select class="form-control" id="InstituteStatus" >
                              <option value="SelectState">Select</option>
                              {% for i in status %}
                              <option value="{{i.institutestatus}}">{{i.institutestatus}}</option>
                              {% endfor %}

                            </select>
        </div>


          <div class="form-group col-md-5 multiselect">
            <label for="Course">Course Level Name</label>
            <select class="form-control" id="Course" >
                                <option value="SelectState">Select</option>
                                {% for i in courselevel %}
                                <option value="{{i.courselevelname}}">{{i.courselevelname}}</option>
                                {% endfor %}

                              </select>
          </div>


              <div class="form-group col-md-5 multiselect">
                <label for="Program">Program Name</label>
                <select class="form-control" id="Program" onchange="program(this.value)">
                                    <option value="SelectState">Select</option>
                                    
                                    {% for i in program %}
                                    <option value="{{i.programname}}">{{i.programname}}</option>
                                    {% endfor %}

                                  </select>
              </div>

        <div class="form-group col-md-5 multiselect">
              <label for="CourseName">Course Name </label>
                <select class="form-control" id="CourseName" >
                  <option value="SelectState">Select</option>           
                    {% for i in course %}
                  <option value="{{i.coursename}}">{{i.coursename}}</option>
                  {% endfor %}
              </select>
        </div>
<center><button class="btn btn-success m-4" type="button" onclick="plotC()">Plot Colleges</button></center>
<button class="btn btn-primary" id="loc" type="button"  style="display:block ;text-align: center;margin: auto" onclick="getLocation()">Get My Location</button>
<br>

<div class="text-center">
  
  <input id="trickmarks" type="range" value="1" min="0" class="slider" max="100" onchange="circlec()" list='tickmarks'>
  
  <datalist id='tickmarks' inputmode="range" min="1" max="20">
      <option>0</option>
      <option>10</option>
      <option>20</option>
      <option>30</option>
      <option>40</option>
      <option>50</option>
      <option>60</option>
      <option>70</option>
      <option>80</option>
      <option>90</option>
      <option>100</option>
    </datalist>
    Unit(Km) <br>
  <button type="button" class="btn btn-primary m-4" onclick="getNearest()">Get Nearest Colleges</button>
  <button class="btn btn-danger" type="button" onclick="clearMap()" >Clear Map</button>
</div>
</div>
</div>



  <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.3/umd/popper.min.js" integrity="sha384-ZMP7rVo3mIykV+2+9J3UJ46jBk0WLaUAdn689aCwoqbBJiSnjAK/l8WvCWPIPm49" crossorigin="anonymous"></script>
  <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.1/js/bootstrap.min.js" integrity="sha384-smHYKdLADwkXOn1EmN1qk/HfnUcbVRZyYmZ4qpPea6sjB/pTJ0euyQp0Mk8ck+5T" crossorigin="anonymous"></script>

  <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.3/umd/popper.min.js" integrity="sha384-ZMP7rVo3mIykV+2+9J3UJ46jBk0WLaUAdn689aCwoqbBJiSnjAK/l8WvCWPIPm49" crossorigin="anonymous"></script>
  <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.1/js/bootstrap.min.js" integrity="sha384-smHYKdLADwkXOn1EmN1qk/HfnUcbVRZyYmZ4qpPea6sjB/pTJ0euyQp0Mk8ck+5T" crossorigin="anonymous"></script>




  



<script>

  


  

      
    var wms = L.tileLayer.wms('https://geoserver2.communitygis.net/geoserver/wms', {
				// layer: layer,
        layers: 'geonode:states_in_india',
				format: 'image/png',
				transparent: 'true',
        cql_filter: "state='Maharashtra'"
			});
      wms.addTo(mymap);
      // //console.log(layers);
      // console.log(wms);


var Amravati =['choose','Akola' ,'Amravati','Buldhana','Yavatmal','Washim']
var Aurangabad=['choose','Aurangabad','Beed','Jalna','Osmanabad' , 'Nanded', 'Latur','Parbhani' ,'Hingoli']
var Mumbai=['choose','Mumbai City','mumbai_suburb','Thane','Palghar','Raigad', 'Ratnagiri','Sindhudurg']
var Nagpur=['choose','Bhandara','Chandrapur','Gadchiroli','Gondia','Nagpur',' Wardha']
var Pune=['choose','Sangli','Satara','Solapur_North', 'Kolhapur' ,'Pune']
var Nashik=['choose','Dhule','Jalgaon','Nandurbar', 'Nashik','Ahmednagar']

var points = []

var wmsLayer;
var DistrictSelected;
var regionlayer;
var regionplot;
var TalukaSelected;
var collegeLayer;
var talukaLayer;
var districtLayer;

$("#inputRegion").change(function(){
  regionlayer = $(this).val();
  var optionsList;
  var htmlString = "";
  

  // wmsLayer = L.tileLayer.wms('https://geonode.communitygis.in/geoserver/geonode/wms', {
  //          layers: 'geonode:maharashtra_final_regions',
  //          format: 'image/png',
  //          transparent: 'true',
  //          cql_filter:`Region='${regionlayer}'`,
  //        });
  //        wmsLayer.addTo(mymap);
        if(regionlayer!='All'){

          fetch('https://geonode.communitygis.in/geoserver/geonode/ows?service=WFS&version=1.0.0&request=GetFeature&typeName=geonode%3Amaharashtra_final_regions&outputFormat=application%2Fjson')
          .then(result=>result.json())
          .then((output)=>{
            regionplot = L.geoJson(output,{
              // onEachFeature: function(feature, layer){
              //   layer.bindPopup(`<div>Location of Observation: ${feature.properties.Location_o}<br>Model System: ${feature.properties.model_syst}<br>Flowering: ${feature.properties.details_2}</div>`)
              // },
              filter:function(feature,layer){
                return feature.properties.Region == regionlayer;
              }
            })
            regionplot.addTo(mymap)
            mymap.fitBounds(regionplot.getBounds())
          })
        }



  switch (regionlayer) {
    case "Amravati":
        optionsList = Amravati;
        break;
    case "Aurangabad":
        optionsList = Aurangabad;
        break;
    case "Mumbai":
        optionsList = Mumbai;
        break;
    case "Nagpur":
        optionsList = Nagpur;
        break;
    case "Pune":
        optionsList = Pune;
        break;
    case "Nashik":
        optionsList = Nashik;
        break;
    default:
      optionsList = []
      break;
}


  if(optionsList.length!=0){
    for(var i = 0; i < optionsList.length; i++){
      htmlString = htmlString+"<option value='"+ optionsList[i] +"'>"+ optionsList[i] +"</option>";
    }
    $("#inputDistrict").html(htmlString);
  }

});


var Raigad = [ 'choose', 'Pen','Alibag','Murud','Panvel','Uran','Karjat','Khalapur','Mangaon']
var Ratnagiri = ['choose','Ratnagiri','Sangameshwar','Lanja','Rajapur ','Chiplun','Guhagar','Dapoli','Mandangad','Khed']
var Sindhudurg = ['choose','Kankavli','Vaibhavwadi','Devgad','Malwan','Sawantwadi','Kudal','Vengurla','Dodamarg (Kasal)']
var Palghar = ['choose','Palghar','Vasai','Dahanu','Talasari','Jawhar','Mokhada','Vada','Vikramgad']
var nashik  = ['choose', 'Nashik','Igatpuri','Dindori','Peth','Trimbakeshwar','Kalwan','Deola','Surgana','Baglan(Satana)','Malegaon','Nandagaon','Chandwad','Niphad','Sinnar','Yeola']
var Nandurbar = ['choose', 'Nandurbar','Navapur','Shahada','Talode','Akkalkuwa','Akrani(Dhadgaon)']
var Dhule= ['choose', 'Dhule','Sakri','Sindkheda','Shirpur']
var mumbai_suburb = ['choose','Kurla','Mulund','Andheri','Borivali']
var Mumbai_City = ['choose','Mumbai']
var Jalgaon = ['choose', 'Jalgaon','Jamner','Erandol','Dharangaon','Bhusawal','Raver','Muktainagar','Yawal','Amalner','Parola','Chopda','Pachora','Bhadgaon','Chalisgaon']
var Buldhana = ['choose', 'Buldhana','Chikhli','Deulgaon','Jalgaon Jamod','Sangrampur','Malkapur','Motala','Nandura','Khamgaon','Shegaon','Mehkar','Sindkhed Raja','Lonar']
var Akola = ['choose', 'Akola','Akot','Telhara','Patur','Murtajapur','Barshitakli']
var Washim = ['choose', 'Wahim','Malegaon','Risod','Mangrulpir','Karanja','Manora']
var Thane=['choose','Thane','Kalyan','Murbad','Bhiwandi','shahapur','Ulhasnagar','Ambarnath']
var amravati = ['choose', 'Amravati','Bhatukali','Nandgaon Khandeshwar','Dharni (Amravati)','Chikhaldara','Achalpur','Chandurbazar','Morshi','Warud','Daryapur','Anjangaon-Surji','Chandur','Dhamangaon','Tiosa']
var Wardha = ['choose', '	Wardha','Deoli','Seloo','Arvi','Ashti','Karanja','Hinganghat','Samudrapur']
var nagpur = ['choose', 'Nagpur','Kamptee','Hingna','Katol','Narkhed','Savner','Kalameshwar','Ramtek','Mouda','Parseoni','Umred','Kuhi','Bhiwapur']
var Bhandara = ['choose', 'Bhandara','Tumsar','Pauni','Mohadi','Sakoli','Lakhni','Lakhandur']
var Gondia = ['choose', 'Gondia','Tiroda','Goregaon','Arjuni Morgaon','Amgaon','Salekasa','Sadak Arjuni ','Deori']
var gadchiroli = ['choose', 'Gadchiroli','Dhanora','Chamorshi','Mulchera','Desaiganj (Vadasa)','Armori','Kurkheda','Korchi','Korchi','Bhamragad','Sironcha']
var Chandrapur = ['choose', 'Chandrapur','Saoli','Mul','Ballarpur','Pombhurna','Gondpimpri','Warora','Chimur','Bhadravati','Bramhapuri','Nagbhid ','Sindewahi','Rajura','Korpana','Jivati']
var Yavatmal = ['choose', 'Yavatmal','Arni','Babhulgaon','Kalamb','Darwha','Digras','Ner','Pusad','Umarkhed','Mahagaon','Kelapur (Pandharkawada)','Ralegaon','Ghatanji','Wani','Maregaon','Zari Jamani']
var Nanded = ['choose', 'Nanded','Ardhapur','Mudkhed','Bhokar','Umri','Loha','Kandhar','Kinwat','Himayatnagar','Hadgaon','Mahur','Deglur','Mukhed','Dharmabad','Biloli','Naigaon (Khairgaon)']
var Hingoli = ['choose', 'Hingoli','Sengaon','Kalamnuri','Basmath','Aundha Nagnath']
var Parbhani = ['choose', 'Parbhani','Sonpeth','Gangakhed','Palam','Purna','Sailu','Jintur','Manwath','Pathri']
var Jalna = ['choose', 'Jalna','Bhokardan','Jafrabad','Badnapur','Ambad','Ghansawangi','Partur','Mantha']
var aurangabad = ['choose', 'Aurangabad','Kannad','Soegaon','Sillod','Phulambri','Khuldabad','Vaijapur','Gangapur','Paithan']
var Beed= ['choose', 'Beed','Ashti','Patoda','Shirur-Kasar','Georai','Majalgaon','Wadwani','Kaij','Dharur','Parli','Ambejogai']
var Latur = ['choose', 'Latur','Renapur','Ahmedpur','Jalkot','Chakur','Shirur Anantpal','Ausa','Nilanga','Deoni','	Udgir',]
var Osmanabad = ['choose', 'Osmanabad','Tuljapur','Bhum','Paranda','Washi','Kalamb','Lohara','Umarga']
var Solapur_North = ['choose', 'Solapur North','Barshi','Solapur South','Akkalkot','Madha','Karmala','Pandharpur','Mohol','Malshiras','Sangole','Mangalvedhe']
var Ahmednagar = ['choose', 'nagar','Shevgaon','Pathardi','Parner','Sangamner','Kopargaon','Akole','Shrirampur','Nevasa','Rahata','Rahuri','Shrigonda ','Karjat','Jamkhed']
var pune = ['choose', 'Pune City','Haveli','Haveli - PCMC, PCMC','Khed (Rajgurunagar)','Junnar','Ambegaon (Ghodegaon)','Maval (Vadgaon)','Mulshi (Paud)','Shirur','Purandhar (Saswad)','Velhe','Bhor','Baramati','Indapur','Daund']
var Satara = ['choose', 'Satara','Jaoli','Koregaon','Wai','Mahabaleshwar','Khandala','Phaltan','Maan (Dahiwadi)','Khatav (Vaduj)','Patan','Karad']
var Sangli = ['choose', 'Miraj','Kavathe-Mahankal','Tasgaon','Jat','Walwa (Islampur)','Shirala','Khanapur-Vita ','Atpadi','Palus','Kadegaon']
var Kolhapur = ['choose', 'Karvir','Panhala','Shahuwadi','Kagal','Hatkanangale','Shirol','Radhanagari','Gaganbawada','Bhudargad','Gadhinglaj','Chandgad','Ajra']




$("#inputDistrict").change(function(){
  DistrictSelected = $(this).val();
  var optionsList;
  var htmlString = "";
  // if(districtLayer)mymap.removeLayer(districtLayer);
  // districtLayer = L.tileLayer.wms('https://geoserver2.communitygis.net/geoserver/wms', {
  //         layers: '	geonode:maharashtra_districts',
  //         format: 'image/png',
  //         transparent: 'true',
  //         cql_filter:`district='${DistrictSelected}'`,
  //       });
  //       districtLayer.addTo(mymap);

    if(DistrictSelected!='All'){

      fetch('http://geoserver2.communitygis.net/geoserver/geonode/ows?service=WFS&version=1.0.0&request=GetFeature&typeName=geonode%3Amaharashtra_districts&maxFeatures=10000000&outputFormat=application%2Fjson')
        .then(result=>result.json())
        .then((output)=>{
          districtLayer = L.geoJson(output,{
            onEachFeature: function(feature, layer){
              layer.setStyle({fillColor :'#00ff00'}); 
              // layer.bindPopup(`<div>Location of Observation: ${feature.properties.Location_o}<br>Model System: ${feature.properties.model_syst}<br>Flowering: ${feature.properties.details_2}</div>`)
            },
            filter:function(feature,layer){
              return feature.properties.district == DistrictSelected;
            }
          })
          districtLayer.addTo(mymap)
          //mymap.fitBounds(districtLayer.getBounds())
        })
    }


  switch (DistrictSelected) {
    case "Raigad":
        optionsList = Raigad;
        break;
    case "Ratnagiri":
        optionsList = Ratnagiri;
        break;
    case "Sindhudurg":
        optionsList = Sindhudurg;
        break;
    case "mumbai_suburb":
        optionsList = mumbai_suburb;
        break;
    case "Mumbai City":
        optionsList = Mumbai_City;
        break;
    case "Thane":
        optionsList = Thane;
        break;
    case "Palghar":
        optionsList = Palghar;
        break;
    case "Nashik":
        optionsList = nashik;
        break;
    case "Nandurbar":
        optionsList = Nandurbar;
        break;
    case  "Dhule":
        optionsList = Dhule;
        break;
    case "Jalgaon":
        optionsList = Jalgaon;
        break;
    case "Buldhana":
        optionsList = Buldhana;
        break;
    case "Akola":
        optionsList = Akola;
        break;
    case "Washim":
        optionsList = Washim;
        break;
    case  "Amravati":
        optionsList = amravati;
        break;
    case "Wardha":
        optionsList = Wardha;
        break;
    case  "Nagpur":
        optionsList = nagpur;
        break;
    case "Bhandara":
        optionsList = Bhandara;
        break;
    case  "Gondia":
        optionsList = Gondia;
        break;
    case "Gadchiroli":
        optionsList = gadchiroli;
        break;
    case  "Chandrapur":
        optionsList = Chandrapur;
        break;
    case "Yavatmal":
        optionsList = Yavatmal;
        break;
    case  "Nanded":
        optionsList = Nanded;
        break;
    case "Hingoli":
        optionsList = Hingoli;
        break;
    case  "Parbhani":
        optionsList = Parbhani;
        break;
    case "Jalna":
        optionsList = Jalna;
        break;
    case  "Aurangabad":
        optionsList = aurangabad;
        break;
    case  "Beed":
        optionsList = Beed;
        break;
    case "Latur":
        optionsList = Latur ;
        break;
    case  "Osmanabad":
        optionsList = Osmanabad;
        break;
    case  "Solapur_North":
        optionsList = Solapur_North;
        break;
    case "Ahmednagar":
        optionsList = Ahmednagar;
        break;
    case  "Pune":
        optionsList = pune;
        break;
    case "Satara":
        optionsList = Satara;
        break;
    case  "Sangli":
        optionsList = Sangli;
        break;
    case "Kolhapur":
        optionsList = Kolhapur;
        break;
    default:
      optionsList = []
      break;

}

// console.log(optionsList)
  if(optionsList.length!=0){
    for(var i = 0; i < optionsList.length; i++){
    htmlString = htmlString+"<option value='"+ optionsList[i] +"'>"+ optionsList[i] +"</option>";
  }
  $("#inputTaluka").html(htmlString);
}

});


$("#inputTaluka").change(function(){
  TalukaSelected = $(this).val()
  console.log(TalukaSelected)
  if (talukaLayer)mymap.removeLayer(talukaLayer);
  talukaLayer = L.tileLayer.wms('https://geoserver2.communitygis.net/geoserver/wms', {
          layers: 'geonode:maha_taluka_13march2021',
          format: 'image/png', 
          transparent: 'true',  
          cql_filter:`taluka_nam like '${TalukaSelected}%'`,
        });
        talukaLayer.addTo(mymap);


})

var region = null, districtt = null, taluka = null, autonomy = null, minority = null, status = null, courselevel = null, programm = null, coursename = null;
var r=false,d=false,t=false,a=false,m=false,s=false,cl=false,p=false,cn=false;
var marker;
var arr=[];
var c;
// var points_data=[]

function plotC(){
  region = document.getElementById('inputRegion').value
  districtt = document.getElementById('inputDistrict').value
  taluka = document.getElementById('inputTaluka').value
  autonomy = document.getElementById('Status').value
  minority = document.getElementById('Minority').value
  status = document.getElementById('InstituteStatus').value
  courselevel = document.getElementById('Course').value
  programm = document.getElementById('Program').value
  coursename = document.getElementById('CourseName').value

  if(region!='SelectState' && region!='All') {
    r=true
    arr.push(region)
  }
  if(districtt!='choose' && districtt!='All') {
    d=true
    arr.push(districtt)
    console.log(arr)
  }
  if(taluka!='choose' && taluka!='All') {
    t=true
    arr.push(taluka)
    // console.log(arr)
  }
  if(autonomy!='SelectState') {
    a=true
    arr.push(autonomy)
  }
  if(minority!='SelectState') {
    m=true
    arr.push(minority)
  }
  if(status!='SelectState') {
    s=true
    arr.push(status)
  }
  if(courselevel!='SelectState') {
    cl =true
    arr.push(courselevel)
  }
  if(programm!='SelectState') {
    p=true
    arr.push(programm)
  }
  if(coursename!='SelectState') {
    cn=true;
    arr.push(coursename)
  }if(region=='All' || districtt=='All' || taluka=='All'){
    if(r || d || t || a || m || s || cl || p || cn){
      if(region=='All'){
        region='SelectState';
      }
      if(districtt=='All'){
        districtt='choose';
      }
      if(taluka=='All'){
        taluka='choose';
      }
      
    }else{
      alll()
    }
    
  }

  arr.forEach(e=>{

    if(r){
      if(points.length==0){
        // rePlot()
        '{% for i in engg %}'
        if(e=='{{i.regionname}}'){
          if('{{i.latitude}}'!='None'){
            marker = L.marker([parseFloat('{{i.latitude}}'),parseFloat('{{i.longitude}}')])
            marker.addTo(mymap)
            marker.feature={
              properties:{
                'lat':parseFloat('{{i.latitude}}'),'lng':parseFloat('{{i.longitude}}'),'Institute_Name':'{{i.institutenameenglish}}','institutecode':'{{i.institutecode}}','address':'{{i.instituteaddressenglish}}','pincode':'{{i.institutepin}}','institute_emailid':'{{i.instituteemailid}}','Principal_Name':'{{i.principalnameenglish}}','Principal_Phone_Number':'{{i.principalofficephoneno}}','institute_stdcode':'{{i.institutestdcode}}','Establisment_Year':'{{i.instituteestablishmentyear}}','Website':'{{i.institutewebaddress}}','region':'{{i.regionname}}','district':'{{i.districtname}}','taluka':'{{i.talukaname}}','status':'{{i.institutestatus}}','lettergrade':'{{i.lettergrade}}','Institue_Minority':'{{i.institutestatusminority}}','Institue_Autonomy':'{{i.institutestatusautonomy}}','status':'{{i.institutestatus}}','girlshostelcapacitytotal':'{{i.girlshostelcapacitytotal}}','boyshostelcapacitytotal':'{{i.boyshostelcapacitytotal}}','nacc_status':'{{i.naccstatus}}',
                }
            }
            // console.log('{{i}}')
            //marker.bindPopup("<div>Institute Name: '{{i.institutenameenglish}}'<br> Region: '{{i.regionname}}' <br>Taluka: '{{i.talukaname}}'<br> Pincode: '{{i.institutepin}}'<br> District: '{{i.districtname}}'<br>Address: '{{i.instituteaddressenglish}}'  <br>Institute Website: <a href='https://{{i.institutewebaddress}}'>{{i.institutewebaddress}}</a> <br> Institute Mail: '{{i.instituteemailid}}' <br>principal name: '{{i.principalnameenglish}}' <br> principal number: '{{i.principalofficephoneno}}' <br> boyshostelcapacitytotal: '{{i.boyshostelcapacitytotal}}' <br> girlshostelcapacitytotal: '{{i.girlshostelcapacitytotal}}' <br>institutestatus: '{{i.institutestatus}}'<br>Institue_Autonomy: '{{i.institutestatusautonomy}}' <br> Institue_Minority: '{{i.institutestatusminority}}'<br> naacstatus: '{{i.naccstatus}}'<br>  lettergrad: '{{i.lettergrade}}'<br><form method='POST' target='_blank' action='more'><input type='hidden' name='data' value='{{i.institutecode}}'> </input><center><button class='btn btn-primary' type='submit'>View More</button> </form></center><br></div>")
            marker.bindPopup("<div><table><tr><th>Institute Name</th><td>{{i.institutenameenglish}}</td></tr><tr><th>Institute Code</th><td>{{i.institutecode}}</td></tr><tr><th>Region</th><td>{{i.regionname}}</td></tr><tr><th>District</th><td>{{i.districtname}}</td></tr><tr><th>Taluka</th><td>{{i.talukaname}}</td></tr><tr><th>Address</th><td>{{i.instituteaddressenglish}}</td></tr><tr><th>Pincode</th><td>{{i.institutepin}}</td></tr><tr><th>Website</th><td><a href='https://{{i.institutewebaddress}}'>{{i.institutewebaddress}}</a></td></tr><tr><th>Mail</th><td>{{i.instituteemailid}}</td></tr><tr><th>Status</th><td>{{i.institutestatus}}</td></tr><tr><th>Autonomy</th><td>{{i.institutestatusautonomy}}</td></tr><tr><th>Minority</th><td>{{i.institutestatusminority}}</td></tr></table><br><form method='POST' target='_blank' action='more'><input type='hidden' name='data' value='{{i.institutecode}}'> </input><center><button class='btn btn-primary' type='submit'>View More</button> </form></center><br></div>")
            points.push(marker)
            // points_data.push((parseFloat('{{i.latitude}}'),parseFloat('{{i.longitude}}')))
          }
        }
        '{% endfor %}'
        r=false

      }else{
        var l=points.slice(0);
        rePlot()
        l.forEach(e=>{
          // console.log(`dddd:${l.length}`)
          if(e.feature.properties.region==region){
            marker = L.marker([e.feature.properties.lat,e.feature.properties.lng])
            console.log(e.feature.properties.lng)
            marker.addTo(mymap)
            marker.feature={
              properties:{
                'lat':e.feature.properties.lat,'lng':e.feature.properties.lng,'Institute_Name':e.feature.properties.Institute_Name,'institutecode':e.feature.properties.institutepin,'region':e.feature.properties.region,'Institue_Autonomy':e.feature.properties.Institue_Autonomy,'district':e.feature.properties.district,'taluka':e.feature.properties.taluka,'Institue_Minority':e.feature.properties.Institue_Minority,'status':e.feature.properties.status,'address':e.feature.properties.address,'nacc_status':e.feature.properties.nacc_status,'boyshostelcapacitytotal':e.feature.properties.boyshostelcapacitytotal,'girlshostelcapacitytotal':e.feature.properties.girlshostelcapacitytotal,'lettergrade':e.feature.properties.lettergrade,'Website':e.feature.properties.Website,'Establisment_Year':e.feature.properties.Establisment_Year,'pincode':e.feature.properties.pincode,'institute_stdcode':e.feature.properties.institute_stdcode,'Principal_Phone_Number':e.feature.properties.Principal_Phone_Number,'Principal_Name':e.feature.properties.Principal_Name,'institute_emailid':e.feature.properties.institute_emailid,'institutecode':e.feature.properties.institutecode,'Institute_Name':e.feature.properties.Institute_Name,
                }
            }
            marker.bindPopup(`<div><table><tr><th>Institute Name</th><td>${e.feature.properties.Institute_Name}</td></tr><tr><th>Institute Code</th><td>${e.feature.properties.institutecode}</td></tr><tr><th>Region</th><td>${e.feature.properties.region}</td></tr><tr><th>District</th><td>${e.feature.properties.district}</td></tr><tr><th>Taluka</th><td>${e.feature.properties.taluka}</td></tr><tr><th>Address</th><td>${e.feature.properties.address}</td></tr><tr><th>Pincode</th><td>${e.feature.properties.institutepin}</td></tr><tr><th>Website</th><td><a href='https://${e.feature.properties.Website}'>${e.feature.properties.Website}</a></td></tr><tr><th>Mail</th><td>${e.feature.properties.institute_emailid}</td></tr><tr><th>Status</th><td>${e.feature.properties.status}</td></tr><tr><th>Autonomy</th><td>${e.feature.properties.Institue_Autonomy}</td></tr><tr><th>Minority</th><td>${e.feature.properties.Institue_Minority}</td></tr></table><br><form method='POST' target='_blank' action='more'><input type='hidden' name='data' value='${e.feature.properties.institutecode}'> </input><center><button class='btn btn-primary' type='submit'>View More</button> </form></center><br></div>`)
            //marker.bindPopup(`<div>Institute Name: ${e.feature.properties.Institute_Name}<br> Institute Code: ${e.feature.properties.institutecode}<br> Region: ${e.feature.properties.region} <br>  District: ${e.feature.properties.district} <br>Taluka: ${e.feature.properties.taluka}<br>Address: ${e.feature.properties.address} <br> Pincode: ${e.feature.properties.institutepin} <br>Website: <a href='https://{{i.institutewebaddress}}'>${e.feature.properties.Website}</a> <br> Mail: ${e.feature.properties.institute_emailid} <br>institutestatus: ${e.feature.properties.status}<br>Institue_Autonomy: ${e.feature.properties.Institue_Autonomy}<br> Institue_Minority: ${e.feature.properties.Institue_Minority}<br><form method='POST' target='_blank' action='more'><input type='hidden' name='data' value='${e.feature.properties.institutecode}'> </input><center><button class='btn btn-primary' type='submit'>View More</button> </form></center><br></div>`)
            points.push(marker)
          }
        })

      }
      r=false
    }
  
    if(d){
      if(points.length==0){
        rePlot()
        '{% for i in engg %}'
        if(districtt=='{{i.districtname}}'){
          if('{{i.latitude}}'!='None'){
            console.log('{{i.latitude}}')
            marker = L.marker([parseFloat('{{i.latitude}}'),parseFloat('{{i.longitude}}')])
            marker.addTo(mymap)
            marker.feature={
              properties:{
                'lat':parseFloat('{{i.latitude}}'),'lng':parseFloat('{{i.longitude}}'),'Institute_Name':'{{i.institutenameenglish}}','institutecode':'{{i.institutecode}}','address':'{{i.instituteaddressenglish}}','pincode':'{{i.institutepin}}','institute_emailid':'{{i.instituteemailid}}','Principal_Name':'{{i.principalnameenglish}}','Principal_Phone_Number':'{{i.principalofficephoneno}}','institute_stdcode':'{{i.institutestdcode}}','Establisment_Year':'{{i.instituteestablishmentyear}}','Website':'{{i.institutewebaddress}}','region':'{{i.regionname}}','district':'{{i.districtname}}','taluka':'{{i.talukaname}}','status':'{{i.institutestatus}}','lettergrade':'{{i.lettergrade}}','Institue_Minority':'{{i.institutestatusminority}}','Institue_Autonomy':'{{i.institutestatusautonomy}}','status':'{{i.institutestatus}}','girlshostelcapacitytotal':'{{i.girlshostelcapacitytotal}}','boyshostelcapacitytotal':'{{i.boyshostelcapacitytotal}}','nacc_status':'{{i.naccstatus}}',
                }
            }
            marker.bindPopup("<div><table><tr><th>Institute Name</th><td>{{i.institutenameenglish}}</td></tr><tr><th>Institute Code</th><td>{{i.institutecode}}</td></tr><tr><th>Region</th><td>{{i.regionname}}</td></tr><tr><th>District</th><td>{{i.districtname}}</td></tr><tr><th>Taluka</th><td>{{i.talukaname}}</td></tr><tr><th>Address</th><td>{{i.instituteaddressenglish}}</td></tr><tr><th>Pincode</th><td>{{i.institutepin}}</td></tr><tr><th>Website</th><td><a href='https://{{i.institutewebaddress}}'>{{i.institutewebaddress}}</a></td></tr><tr><th>Mail</th><td>{{i.instituteemailid}}</td></tr><tr><th>Status</th><td>{{i.institutestatus}}</td></tr><tr><th>Autonomy</th><td>{{i.institutestatusautonomy}}</td></tr><tr><th>Minority</th><td>{{i.institutestatusminority}}</td></tr></table><br><form method='POST' target='_blank' action='more'><input type='hidden' name='data' value='{{i.institutecode}}'> </input><center><button class='btn btn-primary' type='submit'>View More</button> </form></center><br></div>")
            //marker.bindPopup("<div>Institute Name: '{{i.institutenameenglish}}'<br> institutecode: '{{i.institutecode}}'<br> regionname: '{{i.regionname}}' <br>talukaname: '{{i.talukaname}}'<br>  districtname: '{{i.districtname}}'<br>institute_address: '{{i.instituteaddressenglish}}' <br> institute_pincode: '{{i.institutepin}}' <br>institute website: <a href='https://{{i.institutewebaddress}}'>{{i.institutewebaddress}}</a> <br> institute mail: '{{i.instituteemailid}}' <br>principal name: '{{i.principalnameenglish}}' <br> principal number: '{{i.principalofficephoneno}}' <br> institute_establishment_year: '{{i.instituteestablishmentyear}}'<br>  longitude: '{{i.longitude}}' <br> latitude : '{{i.latitude}}' <br> boyshostelcapacitytotal: '{{i.boyshostelcapacitytotal}}' <br> girlshostelcapacitytotal: '{{i.girlshostelcapacitytotal}}' <br>institutestatus: '{{i.institutestatus}}'<br>Institue_Autonomy: '{{i.institutestatusautonomy}}' <br> Institue_Minority: '{{i.institutestatusminority}}'<br> naacstatus: '{{i.naccstatus}}'<br>  lettergrad: '{{i.lettergrade}}'<br><form method='POST' target='_blank' action='more'><input type='hidden' name='data' value='{{i.institutecode}}'> </input><center><button class='btn btn-primary' type='submit'>View More</button> </form></center><br></div>")
            points.push(marker)
  
          }
        }
        '{% endfor %}'
        d=false;
      }else{
        var l=points.slice(0);
        rePlot()
        // console.log(`dddd:${l.length}`)
        l.forEach(e=>{
          if(e.feature.properties.district==districtt){
            // console.log(e.feature.properties.lng)
            marker = L.marker([e.feature.properties.lat,e.feature.properties.lng])
            marker.addTo(mymap)
            marker.feature={
              properties:{
                'lat':e.feature.properties.lat,'lng':e.feature.properties.lng,'Institute_Name':e.feature.properties.Institute_Name,'institutecode':e.feature.properties.institutecode,'region':e.feature.properties.region,'Institue_Autonomy':e.feature.properties.Institue_Autonomy,'district':e.feature.properties.district,'taluka':e.feature.properties.taluka,'Institue_Minority':e.feature.properties.Institue_Minority,'status':e.feature.properties.status,'address':e.feature.properties.address,'nacc_status':e.feature.properties.nacc_status,'boyshostelcapacitytotal':e.feature.properties.boyshostelcapacitytotal,'girlshostelcapacitytotal':e.feature.properties.girlshostelcapacitytotal,'lettergrade':e.feature.properties.lettergrade,'Website':e.feature.properties.Website,'Establisment_Year':e.feature.properties.Establisment_Year,'pincode':e.feature.properties.pincode,'institute_stdcode':e.feature.properties.institute_stdcode,'Principal_Phone_Number':e.feature.properties.Principal_Phone_Number,'Principal_Name':e.feature.properties.Principal_Name,'institute_emailid':e.feature.properties.institute_emailid,'institutecode':e.feature.properties.institutecode,'Institute_Name':e.feature.properties.Institute_Name,
                }
            }
            marker.bindPopup(`<div><table><tr><th>Institute Name</th><td>${e.feature.properties.Institute_Name}</td></tr><tr><th>Institute Code</th><td>${e.feature.properties.institutecode}</td></tr><tr><th>Region</th><td>${e.feature.properties.region}</td></tr><tr><th>District</th><td>${e.feature.properties.district}</td></tr><tr><th>Taluka</th><td>${e.feature.properties.taluka}</td></tr><tr><th>Address</th><td>${e.feature.properties.address}</td></tr><tr><th>Pincode</th><td>${e.feature.properties.institutepin}</td></tr><tr><th>Website</th><td><a href='https://${e.feature.properties.Website}'>${e.feature.properties.Website}</a></td></tr><tr><th>Mail</th><td>${e.feature.properties.institute_emailid}</td></tr><tr><th>Status</th><td>${e.feature.properties.status}</td></tr><tr><th>Autonomy</th><td>${e.feature.properties.Institue_Autonomy}</td></tr><tr><th>Minority</th><td>${e.feature.properties.Institue_Minority}</td></tr></table><br><form method='POST' target='_blank' action='more'><input type='hidden' name='data' value='${e.feature.properties.institutecode}'> </input><center><button class='btn btn-primary' type='submit'>View More</button> </form></center><br></div>`)
            //marker.bindPopup(`<div>Institute Name: ${e.feature.properties.Institute_Name}<br> institutecode: ${e.feature.properties.institutecode}<br> regionname: ${e.feature.properties.region} <br>talukaname: ${e.feature.properties.taluka}<br>  districtname: ${e.feature.properties.district}<br>institute_address: ${e.feature.properties.address} <br> institute_pincode: ${e.feature.properties.pincode} <br>institute website: <a href='https://{{i.institutewebaddress}}'>${e.feature.properties.Website}</a> <br> institute mail: ${e.feature.properties.institute_emailid} <br>principal name:${e.feature.properties.Principal_Name} <br> principal number: ${e.feature.properties.Principal_Phone_Number} <br> institute_establishment_year: ${e.feature.properties.Establisment_Year}<br> boyshostelcapacitytotal: ${e.feature.properties.boyshostelcapacitytotal} <br> girlshostelcapacitytotal: ${e.feature.properties.girlshostelcapacitytotal} <br>institutestatus: ${e.feature.properties.status}<br>Institue_Autonomy: ${e.feature.properties.Institue_Autonomy}<br> Institue_Minority: ${e.feature.properties.Institue_Minority}<br> naacstatus: ${e.feature.properties.nacc_status}<br>  lettergrad: ${e.feature.properties.lettergrade}</div>`)
            points.push(marker)
          }
        })
        d=false;
      }
      arr.shift()
      document.getElementById('inputDistrict').selectedIndex='choose'    
    }

    if(t){
      if(points.length==0){
        rePlot()
        '{% for i in engg %}'
        if(taluka=='{{i.talukaname}}'){
          marker = L.marker([parseFloat('{{i.latitude}}'),parseFloat('{{i.longitude}}')])
          marker.addTo(mymap)
          marker.feature={
              properties:{
                'lat':parseFloat('{{i.latitude}}'),'lng':parseFloat('{{i.longitude}}'),'Institute_Name':'{{i.institutenameenglish}}','institutecode':'{{i.institutecode}}','address':'{{i.instituteaddressenglish}}','pincode':'{{i.institutepin}}','institute_emailid':'{{i.instituteemailid}}','Principal_Name':'{{i.principalnameenglish}}','Principal_Phone_Number':'{{i.principalofficephoneno}}','institute_stdcode':'{{i.institutestdcode}}','Establisment_Year':'{{i.instituteestablishmentyear}}','Website':'{{i.institutewebaddress}}','region':'{{i.regionname}}','district':'{{i.districtname}}','taluka':'{{i.talukaname}}','status':'{{i.institutestatus}}','lettergrade':'{{i.lettergrade}}','Institue_Minority':'{{i.institutestatusminority}}','Institue_Autonomy':'{{i.institutestatusautonomy}}','status':'{{i.institutestatus}}','girlshostelcapacitytotal':'{{i.girlshostelcapacitytotal}}','boyshostelcapacitytotal':'{{i.boyshostelcapacitytotal}}','nacc_status':'{{i.naccstatus}}',
                }
            }
            marker.bindPopup("<div><table><tr><th>Institute Name</th><td>{{i.institutenameenglish}}</td></tr><tr><th>Institute Code</th><td>{{i.institutecode}}</td></tr><tr><th>Region</th><td>{{i.regionname}}</td></tr><tr><th>District</th><td>{{i.districtname}}</td></tr><tr><th>Taluka</th><td>{{i.talukaname}}</td></tr><tr><th>Address</th><td>{{i.instituteaddressenglish}}</td></tr><tr><th>Pincode</th><td>{{i.institutepin}}</td></tr><tr><th>Website</th><td><a href='https://{{i.institutewebaddress}}'>{{i.institutewebaddress}}</a></td></tr><tr><th>Mail</th><td>{{i.instituteemailid}}</td></tr><tr><th>Status</th><td>{{i.institutestatus}}</td></tr><tr><th>Autonomy</th><td>{{i.institutestatusautonomy}}</td></tr><tr><th>Minority</th><td>{{i.institutestatusminority}}</td></tr></table><br><form method='POST' target='_blank' action='more'><input type='hidden' name='data' value='{{i.institutecode}}'> </input><center><button class='btn btn-primary' type='submit'>View More</button> </form></center><br></div>")
            //marker.bindPopup("<div>Institute Name: '{{i.institutenameenglish}}'<br> institutecode: '{{i.institutecode}}'<br> regionname: '{{i.regionname}}' <br>talukaname: '{{i.talukaname}}'<br>  districtname: '{{i.districtname}}'<br>institute_address: '{{i.instituteaddressenglish}}' <br> institute_pincode: '{{i.institutepin}}' <br>institute website: <a href='https://{{i.institutewebaddress}}'>{{i.institutewebaddress}}</a> <br> institute mail: '{{i.instituteemailid}}' <br>principal name: '{{i.principalnameenglish}}' <br> principal number: '{{i.principalofficephoneno}}' <br> institute_establishment_year: '{{i.instituteestablishmentyear}}'<br>  longitude: '{{i.longitude}}' <br> latitude : '{{i.latitude}}' <br> boyshostelcapacitytotal: '{{i.boyshostelcapacitytotal}}' <br> girlshostelcapacitytotal: '{{i.girlshostelcapacitytotal}}' <br>institutestatus: '{{i.institutestatus}}'<br>Institue_Autonomy: '{{i.institutestatusautonomy}}' <br> Institue_Minority: '{{i.institutestatusminority}}'<br> naacstatus: '{{i.naccstatus}}'<br>  lettergrad: '{{i.lettergrade}}'<br><form method='POST' target='_blank' action='more'><input type='hidden' name='data' value='{{i.institutecode}}'> </input><center><button class='btn btn-primary' type='submit'>View More</button> </form></center><br></div>")
          points.push(marker)
        }
        '{% endfor %}'
        t=false;
      }else{
        var l=points.slice(0);
        rePlot()
        // console.log(`dddd:${l.length}`)
        l.forEach(e=>{
          if(e.feature.properties.taluka==taluka){
            console.log(e.feature.properties.lng)
            marker = L.marker([e.feature.properties.lat,e.feature.properties.lng])
            marker.addTo(mymap)
            marker.feature={
              properties:{
                'lat':e.feature.properties.lat,'lng':e.feature.properties.lng,'Institute_Name':e.feature.properties.Institute_Name,'institutecode':e.feature.properties.institutecode,'region':e.feature.properties.region,'Institue_Autonomy':e.feature.properties.Institue_Autonomy,'district':e.feature.properties.district,'taluka':e.feature.properties.taluka,'Institue_Minority':e.feature.properties.Institue_Minority,'status':e.feature.properties.status,'address':e.feature.properties.address,'nacc_status':e.feature.properties.nacc_status,'boyshostelcapacitytotal':e.feature.properties.boyshostelcapacitytotal,'girlshostelcapacitytotal':e.feature.properties.girlshostelcapacitytotal,'lettergrade':e.feature.properties.lettergrade,'Website':e.feature.properties.Website,'Establisment_Year':e.feature.properties.Establisment_Year,'pincode':e.feature.properties.pincode,'institute_stdcode':e.feature.properties.institute_stdcode,'Principal_Phone_Number':e.feature.properties.Principal_Phone_Number,'Principal_Name':e.feature.properties.Principal_Name,'institute_emailid':e.feature.properties.institute_emailid,'institutecode':e.feature.properties.institutecode,'Institute_Name':e.feature.properties.Institute_Name,
                }
            }
            marker.bindPopup(`<div><table><tr><th>Institute Name</th><td>${e.feature.properties.Institute_Name}</td></tr><tr><th>Institute Code</th><td>${e.feature.properties.institutecode}</td></tr><tr><th>Region</th><td>${e.feature.properties.region}</td></tr><tr><th>District</th><td>${e.feature.properties.district}</td></tr><tr><th>Taluka</th><td>${e.feature.properties.taluka}</td></tr><tr><th>Address</th><td>${e.feature.properties.address}</td></tr><tr><th>Pincode</th><td>${e.feature.properties.institutepin}</td></tr><tr><th>Website</th><td><a href='https://${e.feature.properties.Website}'>${e.feature.properties.Website}</a></td></tr><tr><th>Mail</th><td>${e.feature.properties.institute_emailid}</td></tr><tr><th>Status</th><td>${e.feature.properties.status}</td></tr><tr><th>Autonomy</th><td>${e.feature.properties.Institue_Autonomy}</td></tr><tr><th>Minority</th><td>${e.feature.properties.Institue_Minority}</td></tr></table><br><form method='POST' target='_blank' action='more'><input type='hidden' name='data' value='${e.feature.properties.institutecode}'> </input><center><button class='btn btn-primary' type='submit'>View More</button> </form></center><br></div>`)
            //marker.bindPopup(`<div>Institute Name: ${e.feature.properties.Institute_Name}<br> institutecode: ${e.feature.properties.institutecode}<br> regionname: ${e.feature.properties.region} <br>talukaname: ${e.feature.properties.taluka}<br>  districtname: ${e.feature.properties.district}<br>institute_address: ${e.feature.properties.address} <br> institute_pincode: ${e.feature.properties.pincode} <br>institute website: <a href='https://{{i.institutewebaddress}}'>${e.feature.properties.Website}</a> <br> institute mail: ${e.feature.properties.institute_emailid} <br>principal name:${e.feature.properties.Principal_Name} <br> principal number: ${e.feature.properties.Principal_Phone_Number} <br> institute_establishment_year: ${e.feature.properties.Establisment_Year}<br> boyshostelcapacitytotal: ${e.feature.properties.boyshostelcapacitytotal} <br> girlshostelcapacitytotal: ${e.feature.properties.girlshostelcapacitytotal} <br>institutestatus: ${e.feature.properties.status}<br>Institue_Autonomy: ${e.feature.properties.Institue_Autonomy}<br> Institue_Minority: ${e.feature.properties.Institue_Minority}<br> naacstatus: ${e.feature.properties.nacc_status}<br>  lettergrad: ${e.feature.properties.lettergrade}</div>`)
            points.push(marker)
          }
        })
        t=false;
      }
      arr.shift()
      document.getElementById('inputTaluka').selectedIndex='choose'
    }

    if(a){

        if(points.length==0){
          rePlot()
        '{% for i in engg %}'
        if(autonomy=='{{i.institutestatusautonomy}}'){
          // console.log(`${typeof '{{i.latitude}}'}: {{i.latitude}}`)
          if('{{i.latitude}}'!='None'){
            marker = L.marker([parseFloat('{{i.latitude}}'),parseFloat('{{i.longitude}}')])
            marker.bindPopup("<div>Institute Name: '{{i.institutenameenglish}}'<br> institutecode: '{{i.institutecode}}'<br> regionname: '{{i.regionname}}' <br>autonomy: '{{i.talukaname}}'<br>  institute address: '{{i.instituteeebaddress}}' <br> institute pincode: '{{i.institutepin}}' <br>institute website: <a href='https://{{i.institutewebaddress}}'>{{i.institutewebaddress}}</a> <br> institute mail: '{{i.instituteemailid}}' <br>principal name: '{{i.principalnameenglish}}' <br> principal number: '{{i.principalofficephoneno}}' <br> institute_establishment_year: '{{i.instituteestablishmentyear}}'<br>  longitude: '{{i.longitude}}' <br> latitude : '{{i.latitude}}' <br> boyshostel: '{{i.boyshostelcapacitytotal}}' <br> girlshostel: '{{i.girlshostelcapacitytotal}}' <br>institutestatus: '{{i.institutestatus}}'<br>institut_3: '{{i.institutestatusautonomy}}' <br> institut_4: '{{i.institutestatusminority}}'<br> naacstatus: '{{i.naccstatus}}'<br>  lettergrad: '{{i.lettergrade}}'<br><form method='POST' target='_blank' action='more'><input type='hidden' name='data' value='{{i.institutecode}}'> </input><center><button class='btn btn-primary' type='submit'>View More</button> </form></center><br></div>")
            marker.feature={
              properties:{
                'lat':parseFloat('{{i.latitude}}'),'lng':parseFloat('{{i.longitude}}'),'Institute_Name':'{{i.institutenameenglish}}','institutecode':'{{i.institutecode}}','address':'{{i.instituteaddressenglish}}','pincode':'{{i.institutepin}}','institute_emailid':'{{i.instituteemailid}}','Principal_Name':'{{i.principalnameenglish}}','Principal_Phone_Number':'{{i.principalofficephoneno}}','institute_stdcode':'{{i.institutestdcode}}','Establisment_Year':'{{i.instituteestablishmentyear}}','Website':'{{i.institutewebaddress}}','region':'{{i.regionname}}','district':'{{i.districtname}}','taluka':'{{i.talukaname}}','status':'{{i.institutestatus}}','lettergrade':'{{i.lettergrade}}','Institue_Minority':'{{i.institutestatusminority}}','Institue_Autonomy':'{{i.institutestatusautonomy}}','status':'{{i.institutestatus}}','girlshostelcapacitytotal':'{{i.girlshostelcapacitytotal}}','boyshostelcapacitytotal':'{{i.boyshostelcapacitytotal}}','nacc_status':'{{i.naccstatus}}',
                }
            }
            
            marker.addTo(mymap)
            marker.bindPopup("<div><table><tr><th>Institute Name</th><td>{{i.institutenameenglish}}</td></tr><tr><th>Institute Code</th><td>{{i.institutecode}}</td></tr><tr><th>Region</th><td>{{i.regionname}}</td></tr><tr><th>District</th><td>{{i.districtname}}</td></tr><tr><th>Taluka</th><td>{{i.talukaname}}</td></tr><tr><th>Address</th><td>{{i.instituteaddressenglish}}</td></tr><tr><th>Pincode</th><td>{{i.institutepin}}</td></tr><tr><th>Website</th><td><a href='https://{{i.institutewebaddress}}'>{{i.institutewebaddress}}</a></td></tr><tr><th>Mail</th><td>{{i.instituteemailid}}</td></tr><tr><th>Status</th><td>{{i.institutestatus}}</td></tr><tr><th>Autonomy</th><td>{{i.institutestatusautonomy}}</td></tr><tr><th>Minority</th><td>{{i.institutestatusminority}}</td></tr></table><br><form method='POST' target='_blank' action='more'><input type='hidden' name='data' value='{{i.institutecode}}'> </input><center><button class='btn btn-primary' type='submit'>View More</button> </form></center><br></div>")
            //marker.bindPopup("<div>Institute Name: '{{i.institutenameenglish}}'<br> institutecode: '{{i.institutecode}}'<br> regionname: '{{i.regionname}}' <br>talukaname: '{{i.talukaname}}'<br>  districtname: '{{i.districtname}}'<br>institute_address: '{{i.instituteaddressenglish}}' <br> institute_pincode: '{{i.institutepin}}' <br>institute website: <a href='https://{{i.institutewebaddress}}'>{{i.institutewebaddress}}</a> <br> institute mail: '{{i.instituteemailid}}' <br>principal name: '{{i.principalnameenglish}}' <br> principal number: '{{i.principalofficephoneno}}' <br> institute_establishment_year: '{{i.instituteestablishmentyear}}'<br>  longitude: '{{i.longitude}}' <br> latitude : '{{i.latitude}}' <br> boyshostelcapacitytotal: '{{i.boyshostelcapacitytotal}}' <br> girlshostelcapacitytotal: '{{i.girlshostelcapacitytotal}}' <br>institutestatus: '{{i.institutestatus}}'<br>Institue_Autonomy: '{{i.institutestatusautonomy}}' <br> Institue_Minority: '{{i.institutestatusminority}}'<br> naacstatus: '{{i.naccstatus}}'<br>  lettergrad: '{{i.lettergrade}}'<br> <form method='POST' target='_blank' action='more'><input type='hidden' name='data' value='{{i.institutecode}}'> </input><center><button class='btn btn-primary' type='submit'>View More</button> </form></center><br></div>")
            points.push(marker)
          }
        }
        '{% endfor %}'
        a=false;

        }else{
          var l=points.slice(0);
        rePlot()
        l.forEach(e=>{
          // console.log(`lsize:${l.length} ${e.feature.properties.}`)
          if(e.feature.properties.Institue_Autonomy==autonomy){
            console.log(e.feature.properties.district)
            marker = L.marker([e.feature.properties.lat,e.feature.properties.lng])
            marker.addTo(mymap)
            marker.feature={
              properties:{
                'lat':e.feature.properties.lat,'lng':e.feature.properties.lng,'Institute_Name':e.feature.properties.Institute_Name,'institutecode':e.feature.properties.institutecode,'region':e.feature.properties.region,'Institue_Autonomy':e.feature.properties.Institue_Autonomy,'district':e.feature.properties.district,'taluka':e.feature.properties.taluka,'Institue_Minority':e.feature.properties.Institue_Minority,'status':e.feature.properties.status,'address':e.feature.properties.address,'nacc_status':e.feature.properties.nacc_status,'boyshostelcapacitytotal':e.feature.properties.boyshostelcapacitytotal,'girlshostelcapacitytotal':e.feature.properties.girlshostelcapacitytotal,'lettergrade':e.feature.properties.lettergrade,'Website':e.feature.properties.Website,'Establisment_Year':e.feature.properties.Establisment_Year,'pincode':e.feature.properties.pincode,'institute_stdcode':e.feature.properties.institute_stdcode,'Principal_Phone_Number':e.feature.properties.Principal_Phone_Number,'Principal_Name':e.feature.properties.Principal_Name,'institute_emailid':e.feature.properties.institute_emailid,'institutecode':e.feature.properties.institutecode,'Institute_Name':e.feature.properties.Institute_Name,
                }
            }
            marker.bindPopup(`<div><table><tr><th>Institute Name</th><td>${e.feature.properties.Institute_Name}</td></tr><tr><th>Institute Code</th><td>${e.feature.properties.institutecode}</td></tr><tr><th>Region</th><td>${e.feature.properties.region}</td></tr><tr><th>District</th><td>${e.feature.properties.district}</td></tr><tr><th>Taluka</th><td>${e.feature.properties.taluka}</td></tr><tr><th>Address</th><td>${e.feature.properties.address}</td></tr><tr><th>Pincode</th><td>${e.feature.properties.institutepin}</td></tr><tr><th>Website</th><td><a href='https://${e.feature.properties.Website}'>${e.feature.properties.Website}</a></td></tr><tr><th>Mail</th><td>${e.feature.properties.institute_emailid}</td></tr><tr><th>Status</th><td>${e.feature.properties.status}</td></tr><tr><th>Autonomy</th><td>${e.feature.properties.Institue_Autonomy}</td></tr><tr><th>Minority</th><td>${e.feature.properties.Institue_Minority}</td></tr></table><br><form method='POST' target='_blank' action='more'><input type='hidden' name='data' value='${e.feature.properties.institutecode}'> </input><center><button class='btn btn-primary' type='submit'>View More</button> </form></center><br></div>`)
            //marker.bindPopup(`<div>Institute Name: ${e.feature.properties.Institute_Name}<br> institutecode: ${e.feature.properties.institutecode}<br> regionname: ${e.feature.properties.region} <br>talukaname: ${e.feature.properties.taluka}<br>  districtname: ${e.feature.properties.district}<br>institute_address: ${e.feature.properties.address} <br> institute_pincode: ${e.feature.properties.pincode} <br>institute website: <a href='https://{{i.institutewebaddress}}'>${e.feature.properties.Website}</a> <br> institute mail: ${e.feature.properties.institute_emailid} <br>principal name:${e.feature.properties.Principal_Name} <br> principal number: ${e.feature.properties.Principal_Phone_Number} <br> institute_establishment_year: ${e.feature.properties.Establisment_Year}<br> boyshostelcapacitytotal: ${e.feature.properties.boyshostelcapacitytotal} <br> girlshostelcapacitytotal: ${e.feature.properties.girlshostelcapacitytotal} <br>institutestatus: ${e.feature.properties.status}<br>Institue_Autonomy: ${e.feature.properties.Institue_Autonomy}<br> Institue_Minority: ${e.feature.properties.Institue_Minority}<br> naacstatus: ${e.feature.properties.nacc_status}<br>  lettergrad: ${e.feature.properties.lettergrade}</div>`)
            points.push(marker)
          }
        })
        a=false;
        console.log(points[0])

        }
      
      arr.shift()
      document.getElementById('Status').selectedIndex='SelectState'
    // }
    }

    if(m){
      if(points.length==0){
        rePlot()
        '{% for i in engg %}'
        if(e=='{{i.institutestatusminority}}'){
          console.log(`${typeof '{{i.latitude}}'}: {{i.latitude}}`)
          if('{{i.latitude}}'!='None'){
            marker = L.marker([parseFloat('{{i.latitude}}'),parseFloat('{{i.longitude}}')])
            marker.addTo(mymap)
            marker.feature={
              properties:{
                'lat':parseFloat('{{i.latitude}}'),'lng':parseFloat('{{i.longitude}}'),'Institute_Name':'{{i.institutenameenglish}}','institutecode':'{{i.institutecode}}','address':'{{i.instituteaddressenglish}}','pincode':'{{i.institutepin}}','institute_emailid':'{{i.instituteemailid}}','Principal_Name':'{{i.principalnameenglish}}','Principal_Phone_Number':'{{i.principalofficephoneno}}','institute_stdcode':'{{i.institutestdcode}}','Establisment_Year':'{{i.instituteestablishmentyear}}','Website':'{{i.institutewebaddress}}','region':'{{i.regionname}}','district':'{{i.districtname}}','taluka':'{{i.talukaname}}','status':'{{i.institutestatus}}','lettergrade':'{{i.lettergrade}}','Institue_Minority':'{{i.institutestatusminority}}','Institue_Autonomy':'{{i.institutestatusautonomy}}','status':'{{i.institutestatus}}','girlshostelcapacitytotal':'{{i.girlshostelcapacitytotal}}','boyshostelcapacitytotal':'{{i.boyshostelcapacitytotal}}','nacc_status':'{{i.naccstatus}}',
                }
            }
            marker.bindPopup("<div><table><tr><th>Institute Name</th><td>{{i.institutenameenglish}}</td></tr><tr><th>Institute Code</th><td>{{i.institutecode}}</td></tr><tr><th>Region</th><td>{{i.regionname}}</td></tr><tr><th>District</th><td>{{i.districtname}}</td></tr><tr><th>Taluka</th><td>{{i.talukaname}}</td></tr><tr><th>Address</th><td>{{i.instituteaddressenglish}}</td></tr><tr><th>Pincode</th><td>{{i.institutepin}}</td></tr><tr><th>Website</th><td><a href='https://{{i.institutewebaddress}}'>{{i.institutewebaddress}}</a></td></tr><tr><th>Mail</th><td>{{i.instituteemailid}}</td></tr><tr><th>Status</th><td>{{i.institutestatus}}</td></tr><tr><th>Autonomy</th><td>{{i.institutestatusautonomy}}</td></tr><tr><th>Minority</th><td>{{i.institutestatusminority}}</td></tr></table><br><form method='POST' target='_blank' action='more'><input type='hidden' name='data' value='{{i.institutecode}}'> </input><center><button class='btn btn-primary' type='submit'>View More</button> </form></center><br></div>")
            //marker.bindPopup("<div>Institute Name: '{{i.institutenameenglish}}'<br> institutecode: '{{i.institutecode}}'<br> regionname: '{{i.regionname}}' <br>talukaname: '{{i.talukaname}}'<br>  districtname: '{{i.districtname}}'<br>institute_address: '{{i.instituteaddressenglish}}' <br> institute_pincode: '{{i.institutepin}}' <br>institute website: <a href='https://{{i.institutewebaddress}}'>{{i.institutewebaddress}}</a> <br> institute mail: '{{i.instituteemailid}}' <br>principal name: '{{i.principalnameenglish}}' <br> principal number: '{{i.principalofficephoneno}}' <br> institute_establishment_year: '{{i.instituteestablishmentyear}}'<br>  longitude: '{{i.longitude}}' <br> latitude : '{{i.latitude}}' <br> boyshostelcapacitytotal: '{{i.boyshostelcapacitytotal}}' <br> girlshostelcapacitytotal: '{{i.girlshostelcapacitytotal}}' <br>institutestatus: '{{i.institutestatus}}'<br>Institue_Autonomy: '{{i.institutestatusautonomy}}' <br> Institue_Minority: '{{i.institutestatusminority}}'<br> naacstatus: '{{i.naccstatus}}'<br>  lettergrad: '{{i.lettergrade}}'<br><form method='POST' target='_blank' action='more'><input type='hidden' name='data' value='{{i.institutecode}}'> </input><center><button class='btn btn-primary' type='submit'>View More</button> </form></center><br></div>")
            points.push(marker)
          }
        }
        '{% endfor %}'
        m=false;
      document.getElementById('Minority').selectedIndex='SelectState'


      }else{
        var l=points.slice(0);
        rePlot()
        console.log(`lsize:${l.length} ${minority}`)
        l.forEach(e=>{
          if(e.feature.properties.Institue_Minority==minority){
            console.log(e.feature.properties.Institute_Minority)
            marker = L.marker([e.feature.properties.lat,e.feature.properties.lng])
            marker.addTo(mymap)
            marker.feature={
              properties:{
                'lat':e.feature.properties.lat,'lng':e.feature.properties.lng,'Institute_Name':e.feature.properties.Institute_Name,'institutecode':e.feature.properties.institutecode,'region':e.feature.properties.region,'Institue_Autonomy':e.feature.properties.Institue_Autonomy,'district':e.feature.properties.district,'taluka':e.feature.properties.taluka,'Institue_Minority':e.feature.properties.Institue_Minority,'status':e.feature.properties.status,'address':e.feature.properties.address,'nacc_status':e.feature.properties.nacc_status,'boyshostelcapacitytotal':e.feature.properties.boyshostelcapacitytotal,'girlshostelcapacitytotal':e.feature.properties.girlshostelcapacitytotal,'lettergrade':e.feature.properties.lettergrade,'Website':e.feature.properties.Website,'Establisment_Year':e.feature.properties.Establisment_Year,'pincode':e.feature.properties.pincode,'institute_stdcode':e.feature.properties.institute_stdcode,'Principal_Phone_Number':e.feature.properties.Principal_Phone_Number,'Principal_Name':e.feature.properties.Principal_Name,'institute_emailid':e.feature.properties.institute_emailid,'institutecode':e.feature.properties.institutecode,'Institute_Name':e.feature.properties.Institute_Name,
                }
            }
            marker.bindPopup(`<div><table><tr><th>Institute Name</th><td>${e.feature.properties.Institute_Name}</td></tr><tr><th>Institute Code</th><td>${e.feature.properties.institutecode}</td></tr><tr><th>Region</th><td>${e.feature.properties.region}</td></tr><tr><th>District</th><td>${e.feature.properties.district}</td></tr><tr><th>Taluka</th><td>${e.feature.properties.taluka}</td></tr><tr><th>Address</th><td>${e.feature.properties.address}</td></tr><tr><th>Pincode</th><td>${e.feature.properties.institutepin}</td></tr><tr><th>Website</th><td><a href='https://${e.feature.properties.Website}'>${e.feature.properties.Website}</a></td></tr><tr><th>Mail</th><td>${e.feature.properties.institute_emailid}</td></tr><tr><th>Status</th><td>${e.feature.properties.status}</td></tr><tr><th>Autonomy</th><td>${e.feature.properties.Institue_Autonomy}</td></tr><tr><th>Minority</th><td>${e.feature.properties.Institue_Minority}</td></tr></table><br><form method='POST' target='_blank' action='more'><input type='hidden' name='data' value='${e.feature.properties.institutecode}'> </input><center><button class='btn btn-primary' type='submit'>View More</button> </form></center><br></div>`)
            //marker.bindPopup(`<div>Institute Name: ${e.feature.properties.Institute_Name}<br> institutecode: ${e.feature.properties.institutecode}<br> regionname: ${e.feature.properties.region} <br>talukaname: ${e.feature.properties.taluka}<br>  districtname: ${e.feature.properties.district}<br>institute_address: ${e.feature.properties.address} <br> institute_pincode: ${e.feature.properties.pincode} <br>institute website: <a href='https://{{i.institutewebaddress}}'>${e.feature.properties.Website}</a> <br> institute mail: ${e.feature.properties.institute_emailid} <br>principal name:${e.feature.properties.Principal_Name} <br> principal number: ${e.feature.properties.Principal_Phone_Number} <br> institute_establishment_year: ${e.feature.properties.Establisment_Year}<br> boyshostelcapacitytotal: ${e.feature.properties.boyshostelcapacitytotal} <br> girlshostelcapacitytotal: ${e.feature.properties.girlshostelcapacitytotal} <br>institutestatus: ${e.feature.properties.status}<br>Institue_Autonomy: ${e.feature.properties.Institue_Autonomy}<br> Institue_Minority: ${e.feature.properties.Institue_Minority}<br> naacstatus: ${e.feature.properties.nacc_status}<br>  lettergrad: ${e.feature.properties.lettergrade}</div>`)
            points.push(marker)
          }
        })
        m=false;
      }
      arr.shift()
      document.getElementById('Minority').selectedIndex='SelectState'
    }

    if(s){
      if(points.length==0){
        rePlot()
        '{% for i in engg %}'
        if(e=='{{i.institutestatus}}'){
          // console.log('{{i.institutestatus}}')
          if('{{i.latitude}}'!='None'){
            marker = L.marker([parseFloat('{{i.latitude}}'),parseFloat('{{i.longitude}}')])
            marker.addTo(mymap)
            marker.feature={
              properties:{
                'lat':parseFloat('{{i.latitude}}'),'lng':parseFloat('{{i.longitude}}'),'Institute_Name':'{{i.institutenameenglish}}','institutecode':'{{i.institutecode}}','address':'{{i.instituteaddressenglish}}','pincode':'{{i.institutepin}}','institute_emailid':'{{i.instituteemailid}}','Principal_Name':'{{i.principalnameenglish}}','Principal_Phone_Number':'{{i.principalofficephoneno}}','institute_stdcode':'{{i.institutestdcode}}','Establisment_Year':'{{i.instituteestablishmentyear}}','Website':'{{i.institutewebaddress}}','region':'{{i.regionname}}','district':'{{i.districtname}}','taluka':'{{i.talukaname}}','status':'{{i.institutestatus}}','lettergrade':'{{i.lettergrade}}','Institue_Minority':'{{i.institutestatusminority}}','Institue_Autonomy':'{{i.institutestatusautonomy}}','status':'{{i.institutestatus}}','girlshostelcapacitytotal':'{{i.girlshostelcapacitytotal}}','boyshostelcapacitytotal':'{{i.boyshostelcapacitytotal}}','nacc_status':'{{i.naccstatus}}',
                }
            }
            marker.bindPopup("<div><table><tr><th>Institute Name</th><td>{{i.institutenameenglish}}</td></tr><tr><th>Institute Code</th><td>{{i.institutecode}}</td></tr><tr><th>Region</th><td>{{i.regionname}}</td></tr><tr><th>District</th><td>{{i.districtname}}</td></tr><tr><th>Taluka</th><td>{{i.talukaname}}</td></tr><tr><th>Address</th><td>{{i.instituteaddressenglish}}</td></tr><tr><th>Pincode</th><td>{{i.institutepin}}</td></tr><tr><th>Website</th><td><a href='https://{{i.institutewebaddress}}'>{{i.institutewebaddress}}</a></td></tr><tr><th>Mail</th><td>{{i.instituteemailid}}</td></tr><tr><th>Status</th><td>{{i.institutestatus}}</td></tr><tr><th>Autonomy</th><td>{{i.institutestatusautonomy}}</td></tr><tr><th>Minority</th><td>{{i.institutestatusminority}}</td></tr></table><br><form method='POST' target='_blank' action='more'><input type='hidden' name='data' value='{{i.institutecode}}'> </input><center><button class='btn btn-primary' type='submit'>View More</button> </form></center><br></div>")
            //marker.bindPopup("<div>Institute Name: '{{i.institutenameenglish}}'<br> institutecode: '{{i.institutecode}}'<br> regionname: '{{i.regionname}}' <br>talukaname: '{{i.talukaname}}'<br>  districtname: '{{i.districtname}}'<br>institute_address: '{{i.instituteaddressenglish}}' <br> institute_pincode: '{{i.institutepin}}' <br>institute website: <a href='https://{{i.institutewebaddress}}'>{{i.institutewebaddress}}</a> <br> institute mail: '{{i.instituteemailid}}' <br>principal name: '{{i.principalnameenglish}}' <br> principal number: '{{i.principalofficephoneno}}' <br> institute_establishment_year: '{{i.instituteestablishmentyear}}'<br>  longitude: '{{i.longitude}}' <br> latitude : '{{i.latitude}}' <br> boyshostelcapacitytotal: '{{i.boyshostelcapacitytotal}}' <br> girlshostelcapacitytotal: '{{i.girlshostelcapacitytotal}}' <br>institutestatus: '{{i.institutestatus}}'<br>Institue_Autonomy: '{{i.institutestatusautonomy}}' <br> Institue_Minority: '{{i.institutestatusminority}}'<br> naacstatus: '{{i.naccstatus}}'<br>  lettergrad: '{{i.lettergrade}}'<br><form method='POST' target='_blank' action='more'><input type='hidden' name='data' value='{{i.institutecode}}'> </input><center><button class='btn btn-primary' type='submit'>View More</button> </form></center><br></div>")
            points.push(marker)
          }
        }
        '{% endfor %}'
        s=false;

      }else{
        var l=points.slice(0);
        rePlot()
        console.log(`lsize:${l.length}`)
        l.forEach(e=>{
          console.log(`${status}`)
          if(e.feature.properties.status==status){
            console.log(e.feature.properties.district)
            marker = L.marker([e.feature.properties.lat,e.feature.properties.lng])
            marker.addTo(mymap)
            marker.feature={
              properties:{
                'lat':e.feature.properties.lat,'lng':e.feature.properties.lng,'Institute_Name':e.feature.properties.Institute_Name,'institutecode':e.feature.properties.institutecode,'region':e.feature.properties.region,'Institue_Autonomy':e.feature.properties.Institue_Autonomy,'district':e.feature.properties.district,'taluka':e.feature.properties.taluka,'Institue_Minority':e.feature.properties.Institue_Minority,'status':e.feature.properties.status,'address':e.feature.properties.address,'nacc_status':e.feature.properties.nacc_status,'boyshostelcapacitytotal':e.feature.properties.boyshostelcapacitytotal,'girlshostelcapacitytotal':e.feature.properties.girlshostelcapacitytotal,'lettergrade':e.feature.properties.lettergrade,'Website':e.feature.properties.Website,'Establisment_Year':e.feature.properties.Establisment_Year,'pincode':e.feature.properties.pincode,'institute_stdcode':e.feature.properties.institute_stdcode,'Principal_Phone_Number':e.feature.properties.Principal_Phone_Number,'Principal_Name':e.feature.properties.Principal_Name,'institute_emailid':e.feature.properties.institute_emailid,'institutecode':e.feature.properties.institutecode,'Institute_Name':e.feature.properties.Institute_Name,
                }
            }
            marker.bindPopup(`<div><table><tr><th>Institute Name</th><td>${e.feature.properties.Institute_Name}</td></tr><tr><th>Institute Code</th><td>${e.feature.properties.institutecode}</td></tr><tr><th>Region</th><td>${e.feature.properties.region}</td></tr><tr><th>District</th><td>${e.feature.properties.district}</td></tr><tr><th>Taluka</th><td>${e.feature.properties.taluka}</td></tr><tr><th>Address</th><td>${e.feature.properties.address}</td></tr><tr><th>Pincode</th><td>${e.feature.properties.institutepin}</td></tr><tr><th>Website</th><td><a href='https://${e.feature.properties.Website}'>${e.feature.properties.Website}</a></td></tr><tr><th>Mail</th><td>${e.feature.properties.institute_emailid}</td></tr><tr><th>Status</th><td>${e.feature.properties.status}</td></tr><tr><th>Autonomy</th><td>${e.feature.properties.Institue_Autonomy}</td></tr><tr><th>Minority</th><td>${e.feature.properties.Institue_Minority}</td></tr></table><br><form method='POST' target='_blank' action='more'><input type='hidden' name='data' value='${e.feature.properties.institutecode}'> </input><center><button class='btn btn-primary' type='submit'>View More</button> </form></center><br></div>`)
            //marker.bindPopup(`<div>Institute Name: ${e.feature.properties.Institute_Name}<br> institutecode: ${e.feature.properties.institutecode}<br> regionname: ${e.feature.properties.region} <br>talukaname: ${e.feature.properties.taluka}<br>  districtname: ${e.feature.properties.district}<br>institute_address: ${e.feature.properties.address} <br> institute_pincode: ${e.feature.properties.pincode} <br>institute website: <a href='https://{{i.institutewebaddress}}'>${e.feature.properties.Website}</a> <br> institute mail: ${e.feature.properties.institute_emailid} <br>principal name:${e.feature.properties.Principal_Name} <br> principal number: ${e.feature.properties.Principal_Phone_Number} <br> institute_establishment_year: ${e.feature.properties.Establisment_Year}<br> boyshostelcapacitytotal: ${e.feature.properties.boyshostelcapacitytotal} <br> girlshostelcapacitytotal: ${e.feature.properties.girlshostelcapacitytotal} <br>institutestatus: ${e.feature.properties.status}<br>Institue_Autonomy: ${e.feature.properties.Institue_Autonomy}<br> Institue_Minority: ${e.feature.properties.Institue_Minority}<br> naacstatus: ${e.feature.properties.nacc_status}<br>  lettergrad: ${e.feature.properties.lettergrade}</div>`)
            points.push(marker)
          }
        })
        s=false;
      }
      arr.shift()
        document.getElementById('InstituteStatus').selectedIndex='SelectState'
    }

    if(cl){
 
      if(points.length==0){
        rePlot()
        fetch('https://geonode.communitygis.in/geoserver/geonode/ows?service=WFS&version=1.0.0&request=GetFeature&typeName=geonode%3Acourse_level&outputFormat=application%2Fjson')
        .then(result=>result.json())
        .then((output)=>{
          // console.log(output)
          output.features.forEach(e=>{
            console.log(e.properties.regionname==region)
            if(e.properties.courseleve==courselevel){
            if(e.properties.latitude!=null){
              // console.log(e.properties.latitude)
              marker = L.marker([e.properties.latitude,e.properties.longitude])
              marker.addTo(mymap)
              marker.feature={
                properties:{
                  'lat':e.properties.latitude,'lng':e.properties.longitude,'Institute_Name':e.properties.instituten,'institutecode':e.properties.institutec,'address':e.properties.institutea,'pincode':e.properties.institutepi,'institute_emailid':e.properties.institut_2,'Principal_Name':e.properties.principaln,'Principal_Phone_Number':e.properties.principalo,'institute_stdcode':e.properties.institutes,'Establisment_Year':e.properties.institutee,'Website':e.properties.institutew,'region':e.properties.regionname,'district':e.properties.districtna,'taluka':e.properties.talukaname,'status':e.properties.institut_3,'lettergrade':e.properties.lettergrad,'Institue_Minority':e.properties.institut_5,'Institue_Autonomy':e.properties.institut_4,'girlshostelcapacitytotal':e.properties.girlshoste,'boyshostelcapacitytotal':e.properties.boyshostel,'nacc_status':e.properties.naccstatus,
                  }
              }
            marker.bindPopup(`<div><table><tr><th>Institute Name</th><td>${e.properties.instituten}</td></tr><tr><th>Institute Code</th><td>${e.properties.institutec}</td></tr><tr><th>Region</th><td>${e.properties.regionname}</td></tr><tr><th>District</th><td>${e.properties.districtna}</td></tr><tr><th>Taluka</th><td>${e.properties.talukaname}</td></tr><tr><th>Address</th><td>${e.properties.institutea}</td></tr><tr><th>Pincode</th><td>${e.properties.institutepi}</td></tr><tr><th>Website</th><td><a href='https://${e.properties.institutew}'>${e.properties.institutew}</a></td></tr><tr><th>Mail</th><td>${e.properties.institut_2}</td></tr><tr><th>Status</th><td>${e.properties.institut_3}</td></tr><tr><th>Autonomy</th><td>${e.properties.institut_4}</td></tr><tr><th>Minority</th><td>${e.properties.institut_5}</td></tr></table><br><form method='POST' target='_blank' action='more'><input type='hidden' name='data' value='${e.properties.institutec}'> </input><center><button class='btn btn-primary' type='submit'>View More</button> </form></center><br></div>`)
              //marker.bindPopup(`<div>Institute Name: ${e.properties.instituten}<br> institutecode: ${e.properties.institutec}<br> regionname: ${e.properties.regionname} <br>talukaname: ${e.properties.talukaname}<br>  districtname: ${e.properties.districtna}<br>institute_address: ${e.properties.institutea} <br> institute_pincode: ${e.properties.institutepi} <br>institute website: <a href="https://'{feature.properties.institutew}">${e.properties.institutew}</a> <br> institute mail: ${e.properties.institut_2} <br>principal name: ${e.properties.principaln} <br> principal number: <br> girlshostelcapacitytotal: ${e.properties.girlshoste} <br>institutestatus: ${e.properties.institut_3}<br>Institue_Autonomy: ${e.properties.institut_4} <br> Institue_Minority: ${e.properties.institut_5}<br> naacstatus: ${e.properties.naccstatus}<br>  lettergrad: ${e.properties.lettergrad}<br><form method='POST' target='_blank' action='more'><input type='hidden' name='data' value='${e.properties.institutec}'> </input><center><button class='btn btn-primary' type='submit'>View More</button> </form></center><br></div>`)
              points.push(marker)
              
            }
          }

            // console.log(e)
          })

        })
        cl=false;
      

      }else{
    
      var l = points.slice(0);
        rePlot()
        l.forEach(e=>{

          '{% for i in cl %}'
          if('{{ i.institutecode }}'==e.feature.properties.institutecode && courselevel=='{{ i.courselevelname }}'){
            marker = L.marker([e.feature.properties.lat,e.feature.properties.lng])
              marker.addTo(mymap)
              marker.feature={
                properties:{
                  'lat':e.feature.properties.lat,'lng':e.feature.properties.lng,'Institute_Name':e.feature.properties.Institute_Name,'institutecode':e.feature.properties.institutecode,'region':e.feature.properties.region,'Institue_Autonomy':e.feature.properties.Institue_Autonomy,'district':e.feature.properties.district,'taluka':e.feature.properties.taluka,'Institue_Minority':e.feature.properties.Institue_Minority,'status':e.feature.properties.status,'address':e.feature.properties.address,'nacc_status':e.feature.properties.nacc_status,'boyshostelcapacitytotal':e.feature.properties.boyshostelcapacitytotal,'girlshostelcapacitytotal':e.feature.properties.girlshostelcapacitytotal,'lettergrade':e.feature.properties.lettergrade,'Website':e.feature.properties.Website,'Establisment_Year':e.feature.properties.Establisment_Year,'pincode':e.feature.properties.pincode,'institute_stdcode':e.feature.properties.institute_stdcode,'Principal_Phone_Number':e.feature.properties.Principal_Phone_Number,'Principal_Name':e.feature.properties.Principal_Name,'institute_emailid':e.feature.properties.institute_emailid,'institutecode':e.feature.properties.institutecode,'Institute_Name':e.feature.properties.Institute_Name,
                  }
              }
            marker.bindPopup(`<div><table><tr><th>Institute Name</th><td>${e.feature.properties.Institute_Name}</td></tr><tr><th>Institute Code</th><td>${e.feature.properties.institutecode}</td></tr><tr><th>Region</th><td>${e.feature.properties.region}</td></tr><tr><th>District</th><td>${e.feature.properties.district}</td></tr><tr><th>Taluka</th><td>${e.feature.properties.taluka}</td></tr><tr><th>Address</th><td>${e.feature.properties.address}</td></tr><tr><th>Pincode</th><td>${e.feature.properties.institutepin}</td></tr><tr><th>Website</th><td><a href='https://${e.feature.properties.Website}'>${e.feature.properties.Website}</a></td></tr><tr><th>Mail</th><td>${e.feature.properties.institute_emailid}</td></tr><tr><th>Status</th><td>${e.feature.properties.status}</td></tr><tr><th>Autonomy</th><td>${e.feature.properties.Institue_Autonomy}</td></tr><tr><th>Minority</th><td>${e.feature.properties.Institue_Minority}</td></tr></table><br><form method='POST' target='_blank' action='more'><input type='hidden' name='data' value='${e.feature.properties.institutecode}'> </input><center><button class='btn btn-primary' type='submit'>View More</button> </form></center><br></div>`)
              //marker.bindPopup(`<div>Institute Name: ${e.feature.properties.Institute_Name}<br> institutecode: ${e.feature.properties.institutecode}<br> regionname: ${e.feature.properties.region} <br>talukaname: ${e.feature.properties.taluka}<br>  districtname: ${e.feature.properties.district}<br>institute_address: ${e.feature.properties.address} <br> institute_pincode: ${e.feature.properties.pincode} <br>institute website: <a href='https://{{i.institutewebaddress}}'>${e.feature.properties.Website}</a> <br> institute mail: ${e.feature.properties.institute_emailid} <br>principal name:${e.feature.properties.Principal_Name} <br> principal number: ${e.feature.properties.Principal_Phone_Number} <br> institute_establishment_year: ${e.feature.properties.Establisment_Year}<br> boyshostelcapacitytotal: ${e.feature.properties.boyshostelcapacitytotal} <br> girlshostelcapacitytotal: ${e.feature.properties.girlshostelcapacitytotal} <br>institutestatus: ${e.feature.properties.status}<br>Institue_Autonomy: ${e.feature.properties.Institue_Autonomy}<br> Institue_Minority: ${e.feature.properties.Institue_Minority}<br> naacstatus: ${e.feature.properties.nacc_status}<br>  lettergrad: ${e.feature.properties.lettergrade}<br><form method='POST' target='_blank' action='more'><input type='hidden' name='data' value='{{ i.institutecode }}'> </input><center><button class='btn btn-primary' type='submit'>View More</button> </form></center><br></div>`)
              // marker.bindPopup(`<div>Institute Name: ${e1.properties.courseleve}<br> institutecode: '{{i.institutecode}}'<br> regionname: '{{i.regionname}}' <br>talukaname: '{{i.talukaname}}'<br>  districtname: '{{i.districtname}}'<br>institute_address: '{{i.instituteaddressenglish}}' <br> institute_pincode: '{{i.institutepin}}' <br>institute website: <a href='https://{{i.institutewebaddress}}'>{{i.institutewebaddress}}</a> <br> institute mail: '{{i.instituteemailid}}' <br>principal name: '{{i.principalnameenglish}}' <br> principal number: '{{i.principalofficephoneno}}' <br> institute_establishment_year: '{{i.instituteestablishmentyear}}'<br>  longitude: '{{i.longitude}}' <br> latitude : '{{i.latitude}}' <br> boyshostelcapacitytotal: '{{i.boyshostelcapacitytotal}}' <br> girlshostelcapacitytotal: '{{i.girlshostelcapacitytotal}}' <br>institutestatus: '{{i.institutestatus}}'<br>Institue_Autonomy: '{{i.institutestatusautonomy}}' <br> Institue_Minority: '{{i.institutestatusminority}}'<br> naacstatus: '{{i.naccstatus}}'<br>  lettergrad: '{{i.lettergrade}}'</div>`)
              points.push(marker)
          }

          '{% endfor %}'

/*
          fetch('https://geonode.communitygis.in/geoserver/geonode/ows?service=WFS&version=1.0.0&request=GetFeature&typeName=geonode%3Acourse_level&outputFormat=application%2Fjson')
          .then(result=>result.json())
          .then((output)=>{
            // console.log(output)
            output.features.forEach(e1=>{
              // console.log(e.feature.properties.institutecode)
          //if(e.feature.properties.institutecode == e1.properties.institutec && e1.properties.courseleve==courselevel && e1.properties.latitude!=null){
          if(e.feature.properties.institutecode == e1.properties.institutec && e1.properties.courseleve==courselevel && e1.properties.latitude!=null){
            
              marker = L.marker([e1.properties.latitude,e1.properties.longitude])
              marker.addTo(mymap)
              marker.feature={
                properties:{
                  'lat':e1.properties.latitude,'lng':e1.properties.longitude,'Institute_Name':e1.properties.instituten,'institutecode':e1.properties.institutec,'address':e1.properties.institutea,'pincode':e1.properties.institutepi,'institute_emailid':e1.properties.institut_2,'Principal_Name':e1.properties.principaln,'Principal_Phone_Number':e1.properties.principalo,'institute_stdcode':e1.properties.institutes,'Establisment_Year':e1.properties.institutee,'Website':e1.properties.institutew,'region':e1.properties.regionname,'district':e1.properties.districtna,'taluka':e1.properties.talukaname,'status':e1.properties.institut_3,'lettergrade':e1.properties.lettergrad,'Institue_Minority':e1.properties.institut_5,'Institue_Autonomy':e1.properties.institut_4,'girlshostelcapacitytotal':e1.properties.girlshoste,'boyshostelcapacitytotal':e1.properties.boyshostel,'nacc_status':e1.properties.naccstatus,
                  }
              }
              marker.bindPopup(`<div>Institute Name: ${e.feature.properties.Institute_Name}<br> institutecode: ${e.feature.properties.institutecode}<br> regionname: ${e.feature.properties.region} <br>talukaname: ${e.feature.properties.taluka}<br>  districtname: ${e.feature.properties.district}<br>institute_address: ${e.feature.properties.address} <br> institute_pincode: ${e.feature.properties.pincode} <br>institute website: <a href='https://{{i.institutewebaddress}}'>${e.feature.properties.Website}</a> <br> institute mail: ${e.feature.properties.institute_emailid} <br>principal name:${e.feature.properties.Principal_Name} <br> principal number: ${e.feature.properties.Principal_Phone_Number} <br> institute_establishment_year: ${e.feature.properties.Establisment_Year}<br> boyshostelcapacitytotal: ${e.feature.properties.boyshostelcapacitytotal} <br> girlshostelcapacitytotal: ${e.feature.properties.girlshostelcapacitytotal} <br>institutestatus: ${e.feature.properties.status}<br>Institue_Autonomy: ${e.feature.properties.Institue_Autonomy}<br> Institue_Minority: ${e.feature.properties.Institue_Minority}<br> naacstatus: ${e.feature.properties.nacc_status}<br>  lettergrad: ${e.feature.properties.lettergrade}<br><form method='POST' action='more'><input type='hidden' name='data' value='${e1.properties.institutec}'> </input><center><button class='btn btn-primary' type='submit'>View More</button> </form></center><br></div>`)
              // marker.bindPopup(`<div>Institute Name: ${e1.properties.courseleve}<br> institutecode: '{{i.institutecode}}'<br> regionname: '{{i.regionname}}' <br>talukaname: '{{i.talukaname}}'<br>  districtname: '{{i.districtname}}'<br>institute_address: '{{i.instituteaddressenglish}}' <br> institute_pincode: '{{i.institutepin}}' <br>institute website: <a href='https://{{i.institutewebaddress}}'>{{i.institutewebaddress}}</a> <br> institute mail: '{{i.instituteemailid}}' <br>principal name: '{{i.principalnameenglish}}' <br> principal number: '{{i.principalofficephoneno}}' <br> institute_establishment_year: '{{i.instituteestablishmentyear}}'<br>  longitude: '{{i.longitude}}' <br> latitude : '{{i.latitude}}' <br> boyshostelcapacitytotal: '{{i.boyshostelcapacitytotal}}' <br> girlshostelcapacitytotal: '{{i.girlshostelcapacitytotal}}' <br>institutestatus: '{{i.institutestatus}}'<br>Institue_Autonomy: '{{i.institutestatusautonomy}}' <br> Institue_Minority: '{{i.institutestatusminority}}'<br> naacstatus: '{{i.naccstatus}}'<br>  lettergrad: '{{i.lettergrade}}'</div>`)
              points.push(marker)

            
          

          }
  
            })
          })*/
          
          
          // if(e.feature.properties.institutecode == ){}
        })
        console.log(points.length)
        cl=false;
      }
      arr.shift()
        document.getElementById('Course').selectedIndex='SelectState'  

    }
//new
    if(p){
      if(points.length==0){
        rePlot()
        fetch('https://geonode.communitygis.in/geoserver/geonode/ows?service=WFS&version=1.0.0&request=GetFeature&typeName=geonode%3Aprogram_name_mahaengg&outputFormat=application%2Fjson')
        .then(result=>result.json())
        .then((output)=>{
          // console.log(output)
          output.features.forEach(e=>{
            console.log(e.properties.regionname==region)
            if(e.properties.programnam==programm){
            if(e.properties.latitude!=null){
              // console.log(e.properties.latitude)
              marker = L.marker([e.properties.latitude,e.properties.longitude])
              marker.addTo(mymap)
              marker.feature={
                properties:{
                  'lat':e.properties.latitude,'lng':e.properties.longitude,'Institute_Name':e.properties.instituten,'institutecode':e.properties.institutec,'address':e.properties.institutea,'pincode':e.properties.institutepi,'institute_emailid':e.properties.institut_2,'Principal_Name':e.properties.principaln,'Principal_Phone_Number':e.properties.principalo,'institute_stdcode':e.properties.institutes,'Establisment_Year':e.properties.institutee,'Website':e.properties.institutew,'region':e.properties.regionname,'district':e.properties.districtna,'taluka':e.properties.talukaname,'status':e.properties.institut_3,'lettergrade':e.properties.lettergrad,'Institue_Minority':e.properties.institut_5,'Institue_Autonomy':e.properties.institut_4,'girlshostelcapacitytotal':e.properties.girlshoste,'boyshostelcapacitytotal':e.properties.boyshostel,'nacc_status':e.properties.naccstatus,
                  }
              }
            marker.bindPopup(`<div><table><tr><th>Institute Name</th><td>${e.properties.instituten}</td></tr><tr><th>Institute Code</th><td>${e.properties.institutec}</td></tr><tr><th>Region</th><td>${e.properties.regionname}</td></tr><tr><th>District</th><td>${e.properties.districtna}</td></tr><tr><th>Taluka</th><td>${e.properties.talukaname}</td></tr><tr><th>Address</th><td>${e.properties.institutea}</td></tr><tr><th>Pincode</th><td>${e.properties.institutepi}</td></tr><tr><th>Website</th><td><a href='https://${e.properties.institutew}'>${e.properties.institutew}</a></td></tr><tr><th>Mail</th><td>${e.properties.institut_2}</td></tr><tr><th>Status</th><td>${e.properties.institut_3}</td></tr><tr><th>Autonomy</th><td>${e.properties.institut_4}</td></tr><tr><th>Minority</th><td>${e.properties.institut_5}</td></tr></table><br><form method='POST' target='_blank' action='more'><input type='hidden' name='data' value='${e.properties.institutec}'> </input><center><button class='btn btn-primary' type='submit'>View More</button> </form></center><br></div>`)
              //marker.bindPopup(`<div>Institute Name: ${e.properties.instituten}<br> institutecode: ${e.properties.institutec}<br> regionname: ${e.properties.regionname} <br>talukaname: ${e.properties.talukaname}<br>  districtname: ${e.properties.districtna}<br>institute_address: ${e.properties.institutea} <br> institute_pincode: ${e.properties.institutepi} <br>institute website: <a href="https://'{feature.properties.institutew}">${e.properties.institutew}</a> <br> institute mail: ${e.properties.institut_2} <br>principal name: ${e.properties.principaln} <br> principal number: ${e.properties.principalo} <br> institute_establishment_year: ${e.properties.institutee}<br>  longitude: ${e.properties.longitude} <br> latitude : ${e.properties.latitude} <br> boyshostelcapacitytotal: ${e.properties.boyshostel} <br> girlshostelcapacitytotal: ${e.properties.girlshoste} <br>institutestatus: ${e.properties.institut_3}<br>Institue_Autonomy: ${e.properties.institut_4} <br> Institue_Minority: ${e.properties.institut_5}<br> naacstatus: ${e.properties.naccstatus}<br>  lettergrad: ${e.properties.lettergrad}<br><form method='POST' target='_blank' action='more'><input type='hidden' name='data' value='${e.properties.institutec}'> </input><center><button class='btn btn-primary' type='submit'>View More</button> </form></center><br></div>`)
              points.push(marker)
              
            }
          }

           
          })
        })
        document.getElementById('Program').selectedIndex='SelectState'
      p=false;

      }else{
       
      var l = points.slice(0);
        rePlot()
        l.forEach(e=>{

          '{% for i in p %}'
          if('{{ i.institutecode }}'==e.feature.properties.institutecode && programm=='{{ i.programname }}'){
            marker = L.marker([e.feature.properties.lat,e.feature.properties.lng])
              marker.addTo(mymap)
              marker.feature={
                properties:{
                  'lat':e.feature.properties.lat,'lng':e.feature.properties.lng,'Institute_Name':e.feature.properties.Institute_Name,'institutecode':e.feature.properties.institutecode,'region':e.feature.properties.region,'Institue_Autonomy':e.feature.properties.Institue_Autonomy,'district':e.feature.properties.district,'taluka':e.feature.properties.taluka,'Institue_Minority':e.feature.properties.Institue_Minority,'status':e.feature.properties.status,'address':e.feature.properties.address,'nacc_status':e.feature.properties.nacc_status,'boyshostelcapacitytotal':e.feature.properties.boyshostelcapacitytotal,'girlshostelcapacitytotal':e.feature.properties.girlshostelcapacitytotal,'lettergrade':e.feature.properties.lettergrade,'Website':e.feature.properties.Website,'Establisment_Year':e.feature.properties.Establisment_Year,'pincode':e.feature.properties.pincode,'institute_stdcode':e.feature.properties.institute_stdcode,'Principal_Phone_Number':e.feature.properties.Principal_Phone_Number,'Principal_Name':e.feature.properties.Principal_Name,'institute_emailid':e.feature.properties.institute_emailid,'institutecode':e.feature.properties.institutecode,'Institute_Name':e.feature.properties.Institute_Name,
                  }
              }
            marker.bindPopup(`<div><table><tr><th>Institute Name</th><td>${e.feature.properties.Institute_Name}</td></tr><tr><th>Institute Code</th><td>${e.feature.properties.institutecode}</td></tr><tr><th>Region</th><td>${e.feature.properties.region}</td></tr><tr><th>District</th><td>${e.feature.properties.district}</td></tr><tr><th>Taluka</th><td>${e.feature.properties.taluka}</td></tr><tr><th>Address</th><td>${e.feature.properties.address}</td></tr><tr><th>Pincode</th><td>${e.feature.properties.institutepin}</td></tr><tr><th>Website</th><td><a href='https://${e.feature.properties.Website}'>${e.feature.properties.Website}</a></td></tr><tr><th>Mail</th><td>${e.feature.properties.institute_emailid}</td></tr><tr><th>Status</th><td>${e.feature.properties.status}</td></tr><tr><th>Autonomy</th><td>${e.feature.properties.Institue_Autonomy}</td></tr><tr><th>Minority</th><td>${e.feature.properties.Institue_Minority}</td></tr></table><br><form method='POST' target='_blank' action='more'><input type='hidden' name='data' value='${e.feature.properties.institutecode}'> </input><center><button class='btn btn-primary' type='submit'>View More</button> </form></center><br></div>`)
              //marker.bindPopup(`<div>Institute Name: ${e.feature.properties.Institute_Name}<br> institutecode: ${e.feature.properties.institutecode}<br> regionname: ${e.feature.properties.region} <br>talukaname: ${e.feature.properties.taluka}<br>  districtname: ${e.feature.properties.district}<br>institute_address: ${e.feature.properties.address} <br> institute_pincode: ${e.feature.properties.pincode} <br>institute website: <a href='https://{{i.institutewebaddress}}'>${e.feature.properties.Website}</a> <br> institute mail: ${e.feature.properties.institute_emailid} <br>principal name:${e.feature.properties.Principal_Name} <br> principal number: ${e.feature.properties.Principal_Phone_Number} <br> institute_establishment_year: ${e.feature.properties.Establisment_Year}<br> boyshostelcapacitytotal: ${e.feature.properties.boyshostelcapacitytotal} <br> girlshostelcapacitytotal: ${e.feature.properties.girlshostelcapacitytotal} <br>institutestatus: ${e.feature.properties.status}<br>Institue_Autonomy: ${e.feature.properties.Institue_Autonomy}<br> Institue_Minority: ${e.feature.properties.Institue_Minority}<br> naacstatus: ${e.feature.properties.nacc_status}<br>  lettergrad: ${e.feature.properties.lettergrade}<br><form method='POST' target='_blank' action='more'><input type='hidden' name='data' value='{{ i.institutecode }}'> </input><center><button class='btn btn-primary' type='submit'>View More</button> </form></center><br></div>`)
              points.push(marker)
          }

          '{% endfor %}'
          
          
        })
        console.log(points.length)
        p=false;
      }
      
      arr.shift()
        document.getElementById('Program').selectedIndex='SelectState'
    

    }

    if(cn){
      
      if(points.length==0){
        rePlot()
        fetch('https://geonode.communitygis.in/geoserver/geonode/ows?service=WFS&version=1.0.0&request=GetFeature&typeName=geonode%3Acourse_name_mahaengg&outputFormat=application%2Fjson')
        .then(result=>result.json())
        .then((output)=>{
          // console.log(output)
          output.features.forEach(e=>{
            console.log(coursename.includes(e.properties.coursename))
            if(coursename.includes(e.properties.coursename)){
            if(e.properties.latitude!=null){
              // console.log(e.properties.latitude)
              marker = L.marker([e.properties.latitude,e.properties.longitude])
              marker.addTo(mymap)
              marker.feature={
                properties:{
                  'lat':e.properties.latitude,'lng':e.properties.longitude,'Institute_Name':e.properties.instituten,'institutecode':e.properties.institutec,'address':e.properties.institutea,'pincode':e.properties.institutepi,'institute_emailid':e.properties.institut_2,'Principal_Name':e.properties.principaln,'Principal_Phone_Number':e.properties.principalo,'institute_stdcode':e.properties.institutes,'Establisment_Year':e.properties.institutee,'Website':e.properties.institutew,'region':e.properties.regionname,'district':e.properties.districtna,'taluka':e.properties.talukaname,'status':e.properties.institut_3,'lettergrade':e.properties.lettergrad,'Institue_Minority':e.properties.institut_5,'Institue_Autonomy':e.properties.institut_4,'girlshostelcapacitytotal':e.properties.girlshoste,'boyshostelcapacitytotal':e.properties.boyshostel,'nacc_status':e.properties.naccstatus,
                  }
              }
            marker.bindPopup(`<div><table><tr><th>Institute Name</th><td>${e.properties.instituten}</td></tr><tr><th>Institute Code</th><td>${e.properties.institutec}</td></tr><tr><th>Region</th><td>${e.properties.regionname}</td></tr><tr><th>District</th><td>${e.properties.districtna}</td></tr><tr><th>Taluka</th><td>${e.properties.talukaname}</td></tr><tr><th>Address</th><td>${e.properties.institutea}</td></tr><tr><th>Pincode</th><td>${e.properties.institutepi}</td></tr><tr><th>Website</th><td><a href='https://${e.properties.institutew}'>${e.properties.institutew}</a></td></tr><tr><th>Mail</th><td>${e.properties.institut_2}</td></tr><tr><th>Status</th><td>${e.properties.institut_3}</td></tr><tr><th>Autonomy</th><td>${e.properties.institut_4}</td></tr><tr><th>Minority</th><td>${e.properties.institut_5}</td></tr></table><br><form method='POST' target='_blank' action='more'><input type='hidden' name='data' value='${e.properties.institutec}'> </input><center><button class='btn btn-primary' type='submit'>View More</button> </form></center><br></div>`)
            //marker.bindPopup(`<div>Institute Name: ${e.properties.instituten}<br> institutecode: ${e.properties.institutec}<br> regionname: ${e.properties.regionname} <br>talukaname: ${e.properties.talukaname}<br>  districtname: ${e.properties.districtna}<br>institute_address: ${e.properties.institutea} <br> institute_pincode: ${e.properties.institutepi} <br>institute website: <a href="https://'{feature.properties.institutew}">${e.properties.institutew}</a> <br> institute mail: ${e.properties.institut_2} <br>principal name: ${e.properties.principaln} <br> principal number: ${e.properties.principalo} <br> institute_establishment_year: ${e.properties.institutee}<br>  longitude: ${e.properties.longitude} <br> latitude : ${e.properties.latitude} <br> boyshostelcapacitytotal: ${e.properties.boyshostel} <br> girlshostelcapacitytotal: ${e.properties.girlshoste} <br>institutestatus: ${e.properties.institut_3}<br>Institue_Autonomy: ${e.properties.institut_4} <br> Institue_Minority: ${e.properties.institut_5}<br> naacstatus: ${e.properties.naccstatus}<br>  lettergrad: ${e.properties.lettergrad}<br><form method='POST' target='_blank' action='more'><input type='hidden' name='data' value='${e.properties.institutec}'> </input><center><button class='btn btn-primary' type='submit'>View More</button> </form></center><br></div>`)
              points.push(marker)
              
            }
          }

          })

        })
      cn=false;

      }else{
        var l = points.slice(0);
        rePlot()
        l.forEach(e=>{
          var i=0;
          '{% for i in cns %}'

            if(`{{ i.coursename }}`==coursename && '{{ i.institutecode }}'==e.feature.properties.institutecode){
              console.log(`{{ i.coursename }}`==coursename)
              marker = L.marker([e.feature.properties.lat,e.feature.properties.lng])
              marker.addTo(mymap)
              marker.feature={
                properties:{
                  'lat':e.feature.properties.lat,'lng':e.feature.properties.lng,'Institute_Name':e.feature.properties.Institute_Name,'institutecode':e.feature.properties.institutecode,'region':e.feature.properties.region,'Institue_Autonomy':e.feature.properties.Institue_Autonomy,'district':e.feature.properties.district,'taluka':e.feature.properties.taluka,'Institue_Minority':e.feature.properties.Institue_Minority,'status':e.feature.properties.status,'address':e.feature.properties.address,'nacc_status':e.feature.properties.nacc_status,'boyshostelcapacitytotal':e.feature.properties.boyshostelcapacitytotal,'girlshostelcapacitytotal':e.feature.properties.girlshostelcapacitytotal,'lettergrade':e.feature.properties.lettergrade,'Website':e.feature.properties.Website,'Establisment_Year':e.feature.properties.Establisment_Year,'pincode':e.feature.properties.pincode,'institute_stdcode':e.feature.properties.institute_stdcode,'Principal_Phone_Number':e.feature.properties.Principal_Phone_Number,'Principal_Name':e.feature.properties.Principal_Name,'institute_emailid':e.feature.properties.institute_emailid,'institutecode':e.feature.properties.institutecode,'Institute_Name':e.feature.properties.Institute_Name,
                  }
              }
            marker.bindPopup(`<div><table><tr><th>Institute Name</th><td>${e.feature.properties.Institute_Name}</td></tr><tr><th>Institute Code</th><td>${e.feature.properties.institutecode}</td></tr><tr><th>Region</th><td>${e.feature.properties.region}</td></tr><tr><th>District</th><td>${e.feature.properties.district}</td></tr><tr><th>Taluka</th><td>${e.feature.properties.taluka}</td></tr><tr><th>Address</th><td>${e.feature.properties.address}</td></tr><tr><th>Pincode</th><td>${e.feature.properties.institutepin}</td></tr><tr><th>Website</th><td><a href='https://${e.feature.properties.Website}'>${e.feature.properties.Website}</a></td></tr><tr><th>Mail</th><td>${e.feature.properties.institute_emailid}</td></tr><tr><th>Status</th><td>${e.feature.properties.status}</td></tr><tr><th>Autonomy</th><td>${e.feature.properties.Institue_Autonomy}</td></tr><tr><th>Minority</th><td>${e.feature.properties.Institue_Minority}</td></tr></table><br><form method='POST' target='_blank' action='more'><input type='hidden' name='data' value='${e.feature.properties.institutecode}'> </input><center><button class='btn btn-primary' type='submit'>View More</button> </form></center><br></div>`)
              //marker.bindPopup(`<div>Institute Name: ${e.feature.properties.Institute_Name}<br> institutecode: ${e.feature.properties.institutecode}<br> regionname: ${e.feature.properties.region} <br>talukaname: ${e.feature.properties.taluka}<br>  districtname: ${e.feature.properties.district}<br>institute_address: ${e.feature.properties.address} <br> institute_pincode: ${e.feature.properties.pincode} <br>institute website: <a href='https://{{i.institutewebaddress}}'>${e.feature.properties.Website}</a> <br> institute mail: ${e.feature.properties.institute_emailid} <br>principal name:${e.feature.properties.Principal_Name} <br> principal number: ${e.feature.properties.Principal_Phone_Number} <br> institute_establishment_year: ${e.feature.properties.Establisment_Year}<br> boyshostelcapacitytotal: ${e.feature.properties.boyshostelcapacitytotal} <br> girlshostelcapacitytotal: ${e.feature.properties.girlshostelcapacitytotal} <br>institutestatus: ${e.feature.properties.status}<br>Institue_Autonomy: ${e.feature.properties.Institue_Autonomy}<br> Institue_Minority: ${e.feature.properties.Institue_Minority}<br> naacstatus: ${e.feature.properties.nacc_status}<br>  lettergrad: ${e.feature.properties.lettergrade}<br><form method='POST' target='_blank' action='more'><input type='hidden' name='data' value='{{ i.institutecode }}'> </input><center><button class='btn btn-primary' type='submit'>View More</button> </form></center><br></div>`)
              points.push(marker)
            }
          '{% endfor %}'
        })
        cn=false;
      }
      arr.shift()
        document.getElementById('CourseName').selectedIndex='SelectState'
      
      
     
    }

  })

  arr=[]


}

function rePlot(){
  // if(wmsLayer) mymap.removeLayer(wmsLayer);
  // if(talukaLayer) mymap.removeLayer(talukaLayer);
  if(collegeLayer) mymap.removeLayer(collegeLayer);
  points.forEach(element=>{
    mymap.removeLayer(element)
  })
  points=[]
}









function clearMap(){

  document.getElementById('trickmarks').value=0;

  mymap.setView([19.7515-1,75.7139-1], 4.5);
  if(wmsLayer) mymap.removeLayer(wmsLayer);
  if(talukaLayer) {
    console.log("taluka")
    mymap.removeLayer(talukaLayer);}
  if(districtLayer) mymap.removeLayer(districtLayer)
  if(collegeLayer) mymap.removeLayer(collegeLayer);
  if(regionplot) mymap.removeLayer(regionplot);
  
  //document.getElementById('trickmarks').value=0
  //circlec();

  points.forEach(element=>{
    mymap.removeLayer(element)
  })

  points=[]
  if(c) mymap.removeLayer(c)
  if(myLoc) mymap.removeLayer(myLoc)
  region='SelectState'
  autonomy='SelectState'
  district='SelectState'
  taluka='SelectState'
  minority='SelectState'
  status='SelectState'
  course='SelectState'
  programm='SelectState'
  coursename='SelectState'


  document.getElementById('inputRegion').selectedIndex='SelectState'
  document.getElementById('inputDistrict').selectedIndex='choose'
  document.getElementById('inputTaluka').selectedIndex='choose'
  document.getElementById('Status').selectedIndex='SelectState'
  document.getElementById('Minority').selectedIndex='SelectState'
  document.getElementById('InstituteStatus').selectedIndex='SelectState'
  document.getElementById('Course').selectedIndex='SelectState'
  document.getElementById('Program').selectedIndex='SelectState'
  document.getElementById('CourseName').selectedIndex='SelectState'


  htmlString = `<option value="choose">Select District</option>
  <option value="choose">All</option>{% for i in district %}
  <option value="{{i.districtname}}">{{i.districtname}}</option>
  {% endfor %}`


  $("#inputDistrict").html(htmlString);


  htmlString = `<option value="choose">-- select one -- </option>
  <option value="choose">All</option>
  {% for i in taluka %}
  <option value="{{i.talukaname}}">{{i.talukaname}}</option>
  {% endfor %}`

  $("#inputTaluka").html(htmlString);

  return;
  // if(DistrictSelected) mymap.removeLayer(DistrictSelected);
  // if(regionlayer) mymap.removeLayer(regionlayer);
}

var mang = false;
var managementlayer; 
function alll(){
  if(!mang){
    fetch('https://geonode.communitygis.in/geoserver/geonode/ows?service=WFS&version=1.0.0&request=GetFeature&typeName=geonode%3Aengg&outputFormat=application%2Fjson')
    .then(result=>result.json())
        .then((output)=>{
          output.features.forEach(e=>{
            if(e.properties.latitude!=null){
              marker = L.marker([e.properties.latitude,e.properties.longitude])
              marker.addTo(mymap)
              marker.feature={
                properties:{
                  'lat':e.properties.latitude,'lng':e.properties.longitude,'Institute_Name':e.properties.instituten,'institutecode':e.properties.institutec,'address':e.properties.institutea,'pincode':e.properties.institutepi,'institute_emailid':e.properties.institut_2,'Principal_Name':e.properties.principaln,'Principal_Phone_Number':e.properties.principalo,'institute_stdcode':e.properties.institutes,'Establisment_Year':e.properties.institutee,'Website':e.properties.institutew,'region':e.properties.regionname,'district':e.properties.districtna,'taluka':e.properties.talukaname,'status':e.properties.institut_3,'lettergrade':e.properties.lettergrad,'Institue_Minority':e.properties.institut_5,'Institue_Autonomy':e.properties.institut_4,'girlshostelcapacitytotal':e.properties.girlshoste,'boyshostelcapacitytotal':e.properties.boyshostel,'nacc_status':e.properties.naccstatus,
                  }
              }
              marker.bindPopup(`<div><table><tr><th>Institute Name</th><td>${e.properties.instituten}</td></tr><tr><th>Institute Code</th><td>${e.properties.institutec}</td></tr><tr><th>Region</th><td>${e.properties.regionname}</td></tr><tr><th>District</th><td>${e.properties.districtna}</td></tr><tr><th>Taluka</th><td>${e.properties.talukaname}</td></tr><tr><th>Address</th><td>${e.properties.institutea}</td></tr><tr><th>Pincode</th><td>${e.properties.institutepi}</td></tr><tr><th>Website</th><td><a href='https://${e.properties.institutew}'>${e.properties.institutew}</a></td></tr><tr><th>Mail</th><td>${e.properties.institut_2}</td></tr><tr><th>Status</th><td>${e.properties.institut_3}</td></tr><tr><th>Autonomy</th><td>${e.properties.institut_4}</td></tr><tr><th>Minority</th><td>${e.properties.institut_5}</td></tr></table><br><form method='POST' target='_blank' action='more'><input type='hidden' name='data' value='${e.properties.institutec}'> </input><center><button class='btn btn-primary' type='submit'>View More</button> </form></center><br></div>`)
              //marker.bindPopup(`<div>Institute Name: ${e.properties.instituten}<br> institutecode: ${e.properties.institutec}<br> regionname: ${e.properties.regionname} <br>talukaname: ${e.properties.talukaname}<br>  districtname: ${e.properties.districtna}<br>institute_address: ${e.properties.institutea} <br> institute_pincode: ${e.properties.institutepi} <br>institute website: <a href="https://'{feature.properties.institutew}">${e.properties.institutew}</a> <br> institute mail: ${e.properties.institut_2} <br>principal name: ${e.properties.principaln} <br> principal number: ${e.properties.principalo} <br> institute_establishment_year: ${e.properties.institutee}<br>  longitude: ${e.properties.longitude} <br> latitude : ${e.properties.latitude} <br> boyshostelcapacitytotal: ${e.properties.boyshostel} <br> girlshostelcapacitytotal: ${e.properties.girlshoste} <br>institutestatus: ${e.properties.institut_3}<br>Institue_Autonomy: ${e.properties.institut_4} <br> Institue_Minority: ${e.properties.institut_5}<br> naacstatus: ${e.properties.naccstatus}<br>  lettergrad: ${e.properties.lettergrad}<br><form method='POST' target='_blank' action='more'><input type='hidden' name='data' value='${e.properties.institutec}'> </input><center><button class='btn btn-primary' type='submit'>View More</button> </form></center><br></div>`)
              points.push(marker)
            }

          })
        })
      console.log("hello")
      mang = true;
  }
  else{
    clearMap()
    mang = false;
  }


}
var myLoc;
var showL=false
function getLocation() {

  if(!showL){
    if (navigator.geolocation) {
      navigator.geolocation.getCurrentPosition(function(pos) {
      //You have your locaton here
        // console.log("Latitude: " + pos.coords.latitude +
        // "Longitude: " + pos.coords.longitude);
        mymap.setView([pos.coords.latitude, pos.coords.longitude],13);
        myLoc = L.marker([pos.coords.latitude, pos.coords.longitude],{
          // icon: L.icon({
          //   iconUrl:"{% static 'images/marker.png' %}"
          // })
        })
        myLoc.addTo(mymap);
        myLoc.bindPopup('My Location').openPopup()
      });
    } else {
      console.log("Geolocation is not supported by this browser.");
    }
    document.getElementById('loc').innerHTML = 'Remove My Location';
    showL = true;
  }else{
    mymap.removeLayer(myLoc)
    mymap.setView([19.076, 72.8777],5);
    document.getElementById('loc').innerHTML = 'Get My Location';
    showL = false;
  }


}

function program(){
  points.forEach(element=>{
    mymap.removeLayer(element)
  })
}


function circlec(){
  // L.circle([myLoc.getLatLng])
  if(c) mymap.removeLayer(c)
  var p = myLoc.getLatLng()
  // console.log(p.lat)
  c = L.circle([p.lat,p.lng],{
    color:'red',
    fillColor:'#f03',
    fillOpacity:0.5,
    radius:parseInt(document.getElementById('trickmarks').value)*1000
  })
  c.addTo(mymap)

}


function getNearest(){
  // console.log(myLoc.getLatLng())
  program();
  points.forEach(element=>{
  var distance=0;
  // console.log(element.getLatLng())
  distance=(myLoc.getLatLng().distanceTo(element.getLatLng())).toFixed(0)/1000;
  // console.log(parseInt(document.getElementById('trickmarks').value))
  if(distance<parseFloat(document.getElementById('trickmarks').value)){
    console.log(distance)
    element.addTo(mymap)
  }
})

}


</script>

{% endblock map%}
